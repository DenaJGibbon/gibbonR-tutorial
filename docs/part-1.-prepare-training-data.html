<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Part 1. Prepare Training Data | gibbonR: An R package for the automated detection and classification of female gibbon calls from long-term acoustic recordings</title>
  <meta name="description" content="2 Part 1. Prepare Training Data | gibbonR: An R package for the automated detection and classification of female gibbon calls from long-term acoustic recordings" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Part 1. Prepare Training Data | gibbonR: An R package for the automated detection and classification of female gibbon calls from long-term acoustic recordings" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="DenaJGibbon/gibbonR-tutorial" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Part 1. Prepare Training Data | gibbonR: An R package for the automated detection and classification of female gibbon calls from long-term acoustic recordings" />
  
  
  

<meta name="author" content="Dena J. Clink" />


<meta name="date" content="2022-10-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="part-2.-run-the-detectorclassifier.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"> gibbonR </a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> output:</a></li>
<li class="chapter" data-level="2" data-path="part-1.-prepare-training-data.html"><a href="part-1.-prepare-training-data.html"><i class="fa fa-check"></i><b>2</b> Part 1. Prepare Training Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="part-1.-prepare-training-data.html"><a href="part-1.-prepare-training-data.html#download-the-data-from-github"><i class="fa fa-check"></i><b>2.1</b> Download the data from Github</a></li>
<li class="chapter" data-level="2.2" data-path="part-1.-prepare-training-data.html"><a href="part-1.-prepare-training-data.html#part-1a.-training-data-with-labeled-.wav-clips"><i class="fa fa-check"></i><b>2.2</b> Part 1A. Training Data with Labeled .wav clips</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="part-1.-prepare-training-data.html"><a href="part-1.-prepare-training-data.html#read-in-clips-and-calculate-mfccs"><i class="fa fa-check"></i><b>2.2.1</b> Read in clips and calculate MFCCs</a></li>
<li class="chapter" data-level="2.2.2" data-path="part-1.-prepare-training-data.html"><a href="part-1.-prepare-training-data.html#compare-random-forest-and-support-vector-machine-for-supervised-classification"><i class="fa fa-check"></i><b>2.2.2</b> Compare Random Forest and Support Vector Machine for Supervised Classification</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="part-1.-prepare-training-data.html"><a href="part-1.-prepare-training-data.html#part-1b.-training-data-with-raven-selection-tables"><i class="fa fa-check"></i><b>2.3</b> Part 1B. Training Data with Raven Selection Tables</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="part-1.-prepare-training-data.html"><a href="part-1.-prepare-training-data.html#prepare-training-data-from-labeled-annotations"><i class="fa fa-check"></i><b>2.3.1</b> Prepare training data from labeled annotations</a></li>
<li class="chapter" data-level="2.3.2" data-path="part-1.-prepare-training-data.html"><a href="part-1.-prepare-training-data.html#prepare-noise-training-data-from-files-without-target-signal"><i class="fa fa-check"></i><b>2.3.2</b> Prepare noise training data from files without target signal</a></li>
<li class="chapter" data-level="2.3.3" data-path="part-1.-prepare-training-data.html"><a href="part-1.-prepare-training-data.html#now-read-in-clips-based-on-raven-selection-tables-and-calculate-mfccs"><i class="fa fa-check"></i><b>2.3.3</b> Now read in clips based on Raven Selection tables and calculate MFCCs</a></li>
<li class="chapter" data-level="2.3.4" data-path="part-1.-prepare-training-data.html"><a href="part-1.-prepare-training-data.html#compare-random-forest-and-support-vector-machine-for-supervised-classification-1"><i class="fa fa-check"></i><b>2.3.4</b> Compare Random Forest and Support Vector Machine for Supervised Classification</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="part-2.-run-the-detectorclassifier.html"><a href="part-2.-run-the-detectorclassifier.html"><i class="fa fa-check"></i><b>3</b> Part 2. Run the detector/classifier</a>
<ul>
<li class="chapter" data-level="3.1" data-path="part-2.-run-the-detectorclassifier.html"><a href="part-2.-run-the-detectorclassifier.html#part-2a.-feature-extraction"><i class="fa fa-check"></i><b>3.1</b> Part 2a. Feature extraction</a></li>
<li class="chapter" data-level="3.2" data-path="part-2.-run-the-detectorclassifier.html"><a href="part-2.-run-the-detectorclassifier.html#part-2b.-run-the-detectorclassifier-using-the-gibbonr-function."><i class="fa fa-check"></i><b>3.2</b> Part 2b. Run the detector/classifier using the ‘gibbonR’ function.</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="part-3.-calculate-performance-metrics.html"><a href="part-3.-calculate-performance-metrics.html"><i class="fa fa-check"></i><b>4</b> Part 3. Calculate performance metrics</a>
<ul>
<li class="chapter" data-level="4.1" data-path="part-3.-calculate-performance-metrics.html"><a href="part-3.-calculate-performance-metrics.html#part-3a.-prepare-data-for-performance-metrics"><i class="fa fa-check"></i><b>4.1</b> Part 3a. Prepare data for performance metrics</a></li>
<li class="chapter" data-level="4.2" data-path="part-3.-calculate-performance-metrics.html"><a href="part-3.-calculate-performance-metrics.html#part-3b.-identify-true-and-false-positives"><i class="fa fa-check"></i><b>4.2</b> Part 3b. Identify true and false positives</a></li>
<li class="chapter" data-level="4.3" data-path="part-3.-calculate-performance-metrics.html"><a href="part-3.-calculate-performance-metrics.html#part-3c.-calculate-and-plot-performance-metrics-using-rocr"><i class="fa fa-check"></i><b>4.3</b> Part 3c. Calculate and plot performance metrics using ‘ROCR’</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="part-4.-data-visualization.html"><a href="part-4.-data-visualization.html"><i class="fa fa-check"></i><b>5</b> Part 4. Data visualization</a>
<ul>
<li class="chapter" data-level="5.1" data-path="part-4.-data-visualization.html"><a href="part-4.-data-visualization.html#part-4a.-create-a-umap-plot-colored-by-class"><i class="fa fa-check"></i><b>5.1</b> Part 4a. Create a UMAP plot colored by class</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">gibbonR: An R package for the automated detection and classification of female gibbon calls from long-term acoustic recordings</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="part-1.-prepare-training-data" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">2</span> Part 1. Prepare Training Data<a href="part-1.-prepare-training-data.html#part-1.-prepare-training-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In ‘gibbonR’ there are two ways that you can format your training data. The first can be a set of labelled .wav clips with the class indicated in the name of the file (e.g., ‘gibbon_01.wav’ and ‘noise_01.wav’). The second is to have a folder of selection tables created in Raven Pro (K. Lisa Yang Center for Conservation Bioacoustics) and a folder with the associated ‘.wav’ files. For the second approach there must be an annotation column indicating the call type and it is assumed that all signals of interest are annotated, and the rest of the files contain only background noise.</p>
<div id="download-the-data-from-github" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Download the data from Github<a href="part-1.-prepare-training-data.html#download-the-data-from-github" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<pre eval="FALSE"><code># You need to tell R where to store the zip files on your computer.
destination.file.path.zip &lt;-
  &quot;/Users/denaclink/Downloads/BorneoExampleData.zip&quot;

# You also need to tell R where to save the unzipped files
destination.file.path &lt;- &quot;/Users/denaclink/Desktop/RStudio Projects/gibbonR/data/&quot;

# This function will download the data from github

utils::download.file(&quot;https://github.com/DenaJGibbon/BorneoExampleData/archive/master.zip&quot;,
                     destfile = destination.file.path.zip)

# This function will unzip the file
utils::unzip(zipfile = destination.file.path.zip,
             exdir = destination.file.path)

# Examine the contents
list.of.sound.files &lt;- list.files(paste(destination.file.path,
                                        &quot;BorneoExampleData-master&quot;, &quot;data&quot;, sep =
                                          &quot;/&quot;),
                                  full.names = T)
list.of.sound.files
</code></pre>
<p>Use this function to read in the .RDA file and save it as an R object from <a href="https://stackoverflow.com/questions/5577221/how-can-i-load-an-object-into-a-variable-name-that-i-specify-from-an-r-data-file" class="uri">https://stackoverflow.com/questions/5577221/how-can-i-load-an-object-into-a-variable-name-that-i-specify-from-an-r-data-file</a></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="part-1.-prepare-training-data.html#cb2-1" aria-hidden="true" tabindex="-1"></a>loadRData <span class="ot">&lt;-</span> <span class="cf">function</span>(fileName) {</span>
<span id="cb2-2"><a href="part-1.-prepare-training-data.html#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#loads an RData file, and returns it</span></span>
<span id="cb2-3"><a href="part-1.-prepare-training-data.html#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">load</span>(fileName)</span>
<span id="cb2-4"><a href="part-1.-prepare-training-data.html#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get</span>(<span class="fu">ls</span>()[<span class="fu">ls</span>() <span class="sc">!=</span> <span class="st">&quot;fileName&quot;</span>])</span>
<span id="cb2-5"><a href="part-1.-prepare-training-data.html#cb2-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>This function will load the entire list of r data files</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="part-1.-prepare-training-data.html#cb3-1" aria-hidden="true" tabindex="-1"></a>list.rda.files <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb3-2"><a href="part-1.-prepare-training-data.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(x <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(list.of.sound.files)){</span>
<span id="cb3-3"><a href="part-1.-prepare-training-data.html#cb3-3" aria-hidden="true" tabindex="-1"></a>  list.rda.files[[x]] <span class="ot">&lt;-</span>  <span class="fu">loadRData</span>(list.of.sound.files[[x]])</span>
<span id="cb3-4"><a href="part-1.-prepare-training-data.html#cb3-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Assign each rda an informative name</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="part-1.-prepare-training-data.html#cb4-1" aria-hidden="true" tabindex="-1"></a>multi.class.list <span class="ot">&lt;-</span> list.rda.files[[<span class="dv">1</span>]]</span>
<span id="cb4-2"><a href="part-1.-prepare-training-data.html#cb4-2" aria-hidden="true" tabindex="-1"></a>S11_20180219_060002_1800sto3600s <span class="ot">&lt;-</span> list.rda.files[[<span class="dv">2</span>]]</span></code></pre></div>
<p>Now we create a directory with the training .wav files</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="part-1.-prepare-training-data.html#cb5-1" aria-hidden="true" tabindex="-1"></a>TrainingDataDirectory <span class="ot">&lt;-</span> <span class="st">&quot;/Users/denaclink/Desktop/RStudio Projects/gibbonR/data/BorneoMultiClass&quot;</span></span>
<span id="cb5-2"><a href="part-1.-prepare-training-data.html#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="part-1.-prepare-training-data.html#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(a <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(multi.class.list)){</span>
<span id="cb5-4"><a href="part-1.-prepare-training-data.html#cb5-4" aria-hidden="true" tabindex="-1"></a>  Temp.element <span class="ot">&lt;-</span> multi.class.list[[a]]</span>
<span id="cb5-5"><a href="part-1.-prepare-training-data.html#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">writeWave</span>(Temp.element[[<span class="dv">2</span>]], <span class="fu">paste</span>(TrainingDataDirectory,Temp.element[[<span class="dv">1</span>]],<span class="at">sep=</span><span class="st">&#39;/&#39;</span>))</span>
<span id="cb5-6"><a href="part-1.-prepare-training-data.html#cb5-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="part-1a.-training-data-with-labeled-.wav-clips" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Part 1A. Training Data with Labeled .wav clips<a href="part-1.-prepare-training-data.html#part-1a.-training-data-with-labeled-.wav-clips" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="read-in-clips-and-calculate-mfccs" class="section level3 hasAnchor" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Read in clips and calculate MFCCs<a href="part-1.-prepare-training-data.html#read-in-clips-and-calculate-mfccs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="part-1.-prepare-training-data.html#cb6-1" aria-hidden="true" tabindex="-1"></a>TrainingWavFilesDir <span class="ot">&lt;-</span> </span>
<span id="cb6-2"><a href="part-1.-prepare-training-data.html#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;/Users/denaclink/Desktop/RStudio Projects/gibbonR/data/BorneoMultiClass/&quot;</span></span>
<span id="cb6-3"><a href="part-1.-prepare-training-data.html#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="part-1.-prepare-training-data.html#cb6-4" aria-hidden="true" tabindex="-1"></a>trainingdata <span class="ot">&lt;-</span> gibbonR<span class="sc">::</span><span class="fu">MFCCFunction</span>(<span class="at">input.dir=</span>TrainingWavFilesDir, <span class="at">min.freq =</span> <span class="dv">400</span>, <span class="at">max.freq =</span> <span class="dv">1600</span>,<span class="at">win.avg=</span><span class="st">&quot;standard&quot;</span>)</span>
<span id="cb6-5"><a href="part-1.-prepare-training-data.html#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="part-1.-prepare-training-data.html#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="part-1.-prepare-training-data.html#cb6-7" aria-hidden="true" tabindex="-1"></a>trainingdata<span class="sc">$</span>class <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(trainingdata<span class="sc">$</span>class)</span></code></pre></div>
</div>
<div id="compare-random-forest-and-support-vector-machine-for-supervised-classification" class="section level3 hasAnchor" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Compare Random Forest and Support Vector Machine for Supervised Classification<a href="part-1.-prepare-training-data.html#compare-random-forest-and-support-vector-machine-for-supervised-classification" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="part-1.-prepare-training-data.html#cb7-1" aria-hidden="true" tabindex="-1"></a>trainingdata<span class="sc">$</span>class <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(trainingdata<span class="sc">$</span>class)</span>
<span id="cb7-2"><a href="part-1.-prepare-training-data.html#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="part-1.-prepare-training-data.html#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="part-1.-prepare-training-data.html#cb7-4" aria-hidden="true" tabindex="-1"></a>ml.model.svm <span class="ot">&lt;-</span> e1071<span class="sc">::</span><span class="fu">svm</span>(trainingdata[, <span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(trainingdata)], trainingdata<span class="sc">$</span>class, <span class="at">kernel =</span> <span class="st">&quot;radial&quot;</span>, </span>
<span id="cb7-5"><a href="part-1.-prepare-training-data.html#cb7-5" aria-hidden="true" tabindex="-1"></a>                           <span class="at">cross =</span> <span class="dv">25</span>,</span>
<span id="cb7-6"><a href="part-1.-prepare-training-data.html#cb7-6" aria-hidden="true" tabindex="-1"></a>                           <span class="at">probability =</span> <span class="cn">TRUE</span>)</span>
<span id="cb7-7"><a href="part-1.-prepare-training-data.html#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="part-1.-prepare-training-data.html#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&#39;SVM accuracy&#39;</span>,ml.model.svm<span class="sc">$</span>tot.accuracy))</span></code></pre></div>
<pre><code>## [1] &quot;SVM accuracy 88&quot;</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="part-1.-prepare-training-data.html#cb9-1" aria-hidden="true" tabindex="-1"></a>ml.model.rf <span class="ot">&lt;-</span> randomForest<span class="sc">::</span><span class="fu">randomForest</span>(<span class="at">x=</span>trainingdata[, <span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(trainingdata)], <span class="at">y =</span> trainingdata<span class="sc">$</span>class)</span>
<span id="cb9-2"><a href="part-1.-prepare-training-data.html#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="part-1.-prepare-training-data.html#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="part-1.-prepare-training-data.html#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ml.model.rf)</span></code></pre></div>
<pre><code>## 
## Call:
##  randomForest(x = trainingdata[, 2:ncol(trainingdata)], y = trainingdata$class) 
##                Type of random forest: classification
##                      Number of trees: 500
## No. of variables tried at each split: 13
## 
##         OOB estimate of  error rate: 10.67%
## Confusion matrix:
##               female.gibbon leaf.monkey noise solo.gibbon class.error
## female.gibbon            18           0     1           1        0.10
## leaf.monkey               0          12     3           0        0.20
## noise                     0           0    18           2        0.10
## solo.gibbon               0           1     0          19        0.05</code></pre>
</div>
</div>
<div id="part-1b.-training-data-with-raven-selection-tables" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Part 1B. Training Data with Raven Selection Tables<a href="part-1.-prepare-training-data.html#part-1b.-training-data-with-raven-selection-tables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="prepare-training-data-from-labeled-annotations" class="section level3 hasAnchor" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Prepare training data from labeled annotations<a href="part-1.-prepare-training-data.html#prepare-training-data-from-labeled-annotations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="part-1.-prepare-training-data.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify the folder where the training data will be saved</span></span>
<span id="cb11-2"><a href="part-1.-prepare-training-data.html#cb11-2" aria-hidden="true" tabindex="-1"></a>TrainingDataFolderLocation <span class="ot">&lt;-</span> <span class="st">&quot;/Users/denaclink/Desktop/RStudio Projects/gibbonR/data/TrainingDataFromRavenSelectionTables&quot;</span></span>
<span id="cb11-3"><a href="part-1.-prepare-training-data.html#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="part-1.-prepare-training-data.html#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Directory with annotated selection tables</span></span>
<span id="cb11-5"><a href="part-1.-prepare-training-data.html#cb11-5" aria-hidden="true" tabindex="-1"></a>AnnotatedSelectionTables <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&quot;/Users/denaclink/Desktop/RStudio Projects/gibbonR/data/SelectionTables/GibbonTrainingSelectionTables/&quot;</span>,</span>
<span id="cb11-6"><a href="part-1.-prepare-training-data.html#cb11-6" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">full.names =</span> T)</span>
<span id="cb11-7"><a href="part-1.-prepare-training-data.html#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="part-1.-prepare-training-data.html#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Directory with corresponding .wav files</span></span>
<span id="cb11-9"><a href="part-1.-prepare-training-data.html#cb11-9" aria-hidden="true" tabindex="-1"></a>AnnotatedWaveFiles <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&quot;/Users/denaclink/Library/CloudStorage/Box-Box/gibbonRSampleFiles/GibbonTrainingFiles/&quot;</span>,<span class="at">full.names =</span> T)</span>
<span id="cb11-10"><a href="part-1.-prepare-training-data.html#cb11-10" aria-hidden="true" tabindex="-1"></a>AnnotatedWaveFilesShort <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&quot;/Users/denaclink/Library/CloudStorage/Box-Box/gibbonRSampleFiles/GibbonTrainingFiles/&quot;</span>,<span class="at">full.names =</span> F)</span>
<span id="cb11-11"><a href="part-1.-prepare-training-data.html#cb11-11" aria-hidden="true" tabindex="-1"></a>AnnotatedWaveFilesShort <span class="ot">&lt;-</span> <span class="fu">str_split_fixed</span>(AnnotatedWaveFilesShort,<span class="at">pattern =</span> <span class="st">&#39;.wav&#39;</span>, <span class="at">n=</span><span class="dv">2</span>)[,<span class="dv">1</span>]</span>
<span id="cb11-12"><a href="part-1.-prepare-training-data.html#cb11-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-13"><a href="part-1.-prepare-training-data.html#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop to cut out the corresponding annotations into short clips</span></span>
<span id="cb11-14"><a href="part-1.-prepare-training-data.html#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span> <span class="fu">length</span>(AnnotatedSelectionTables)){</span>
<span id="cb11-15"><a href="part-1.-prepare-training-data.html#cb11-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-16"><a href="part-1.-prepare-training-data.html#cb11-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Read in selection table</span></span>
<span id="cb11-17"><a href="part-1.-prepare-training-data.html#cb11-17" aria-hidden="true" tabindex="-1"></a>  TempSelectionTable <span class="ot">&lt;-</span> <span class="fu">read.delim2</span>(AnnotatedSelectionTables[i])</span>
<span id="cb11-18"><a href="part-1.-prepare-training-data.html#cb11-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-19"><a href="part-1.-prepare-training-data.html#cb11-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Find the corresponding soundfile</span></span>
<span id="cb11-20"><a href="part-1.-prepare-training-data.html#cb11-20" aria-hidden="true" tabindex="-1"></a>  SoundFileIndex <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">str_detect</span>(AnnotatedSelectionTables[i],AnnotatedWaveFilesShort))</span>
<span id="cb11-21"><a href="part-1.-prepare-training-data.html#cb11-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-22"><a href="part-1.-prepare-training-data.html#cb11-22" aria-hidden="true" tabindex="-1"></a>  TempAnnotateWave <span class="ot">&lt;-</span> <span class="fu">readWave</span>(AnnotatedWaveFiles[SoundFileIndex])</span>
<span id="cb11-23"><a href="part-1.-prepare-training-data.html#cb11-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-24"><a href="part-1.-prepare-training-data.html#cb11-24" aria-hidden="true" tabindex="-1"></a>  ShortSoundClips <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(TempSelectionTable),</span>
<span id="cb11-25"><a href="part-1.-prepare-training-data.html#cb11-25" aria-hidden="true" tabindex="-1"></a>                                <span class="cf">function</span>(j) <span class="fu">extractWave</span>(TempAnnotateWave,</span>
<span id="cb11-26"><a href="part-1.-prepare-training-data.html#cb11-26" aria-hidden="true" tabindex="-1"></a>                                                        <span class="at">from=</span> <span class="fu">as.numeric</span>(TempSelectionTable[j,]<span class="sc">$</span>Begin.Time..s.),</span>
<span id="cb11-27"><a href="part-1.-prepare-training-data.html#cb11-27" aria-hidden="true" tabindex="-1"></a>                                                        <span class="at">to=</span><span class="fu">as.numeric</span>(TempSelectionTable[j,]<span class="sc">$</span> End.Time..s.),</span>
<span id="cb11-28"><a href="part-1.-prepare-training-data.html#cb11-28" aria-hidden="true" tabindex="-1"></a>                                                        <span class="at">xunit =</span> <span class="fu">c</span>(<span class="st">&quot;time&quot;</span>),<span class="at">plot=</span>F,<span class="at">output=</span><span class="st">&quot;Wave&quot;</span>))</span>
<span id="cb11-29"><a href="part-1.-prepare-training-data.html#cb11-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Write wave files to folder</span></span>
<span id="cb11-30"><a href="part-1.-prepare-training-data.html#cb11-30" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(ShortSoundClips)){</span>
<span id="cb11-31"><a href="part-1.-prepare-training-data.html#cb11-31" aria-hidden="true" tabindex="-1"></a>    TempClip <span class="ot">&lt;-</span> ShortSoundClips[[k]]</span>
<span id="cb11-32"><a href="part-1.-prepare-training-data.html#cb11-32" aria-hidden="true" tabindex="-1"></a>    WavFileName <span class="ot">&lt;-</span> <span class="fu">paste</span>(TrainingDataFolderLocation,<span class="st">&#39;/female.gibbon_&#39;</span>, k, <span class="st">&#39;.wav&#39;</span>,<span class="at">sep=</span><span class="st">&quot;&quot;</span>)</span>
<span id="cb11-33"><a href="part-1.-prepare-training-data.html#cb11-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">writeWave</span>(TempClip,WavFileName,<span class="at">extensible =</span> F)</span>
<span id="cb11-34"><a href="part-1.-prepare-training-data.html#cb11-34" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb11-35"><a href="part-1.-prepare-training-data.html#cb11-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-36"><a href="part-1.-prepare-training-data.html#cb11-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-37"><a href="part-1.-prepare-training-data.html#cb11-37" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="prepare-noise-training-data-from-files-without-target-signal" class="section level3 hasAnchor" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> Prepare noise training data from files without target signal<a href="part-1.-prepare-training-data.html#prepare-noise-training-data-from-files-without-target-signal" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="part-1.-prepare-training-data.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify the folder where the training data will be saved</span></span>
<span id="cb12-2"><a href="part-1.-prepare-training-data.html#cb12-2" aria-hidden="true" tabindex="-1"></a>TrainingDataFolderLocation <span class="ot">&lt;-</span> <span class="st">&quot;/Users/denaclink/Desktop/RStudio Projects/gibbonR/data/TrainingDataFromRavenSelectionTables/&quot;</span></span>
<span id="cb12-3"><a href="part-1.-prepare-training-data.html#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="part-1.-prepare-training-data.html#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Directory with annotated selection tables</span></span>
<span id="cb12-5"><a href="part-1.-prepare-training-data.html#cb12-5" aria-hidden="true" tabindex="-1"></a>NoiseSelectionTables <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&quot;/Users/denaclink/Desktop/RStudio Projects/gibbonR/data/SelectionTables/NoiseSelectionTables/&quot;</span>,</span>
<span id="cb12-6"><a href="part-1.-prepare-training-data.html#cb12-6" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">full.names =</span> T)</span>
<span id="cb12-7"><a href="part-1.-prepare-training-data.html#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="part-1.-prepare-training-data.html#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Directory with corresponding .wav files</span></span>
<span id="cb12-9"><a href="part-1.-prepare-training-data.html#cb12-9" aria-hidden="true" tabindex="-1"></a>NoiseWaveFiles <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&quot;/Users/denaclink/Library/CloudStorage/Box-Box/gibbonRSampleFiles/NoiseFiles/&quot;</span>,<span class="at">full.names =</span> T)</span>
<span id="cb12-10"><a href="part-1.-prepare-training-data.html#cb12-10" aria-hidden="true" tabindex="-1"></a>NoiseWaveFilesShort <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&quot;/Users/denaclink/Library/CloudStorage/Box-Box/gibbonRSampleFiles/NoiseFiles/&quot;</span>,<span class="at">full.names =</span> F)</span>
<span id="cb12-11"><a href="part-1.-prepare-training-data.html#cb12-11" aria-hidden="true" tabindex="-1"></a>NoiseWaveFilesShort <span class="ot">&lt;-</span> <span class="fu">str_split_fixed</span>(NoiseWaveFilesShort,<span class="at">pattern =</span> <span class="st">&#39;.wav&#39;</span>, <span class="at">n=</span><span class="dv">2</span>)[,<span class="dv">1</span>]</span>
<span id="cb12-12"><a href="part-1.-prepare-training-data.html#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="part-1.-prepare-training-data.html#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(NoiseSelectionTables)){</span>
<span id="cb12-14"><a href="part-1.-prepare-training-data.html#cb12-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-15"><a href="part-1.-prepare-training-data.html#cb12-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Find the corresponding soundfile</span></span>
<span id="cb12-16"><a href="part-1.-prepare-training-data.html#cb12-16" aria-hidden="true" tabindex="-1"></a>  SoundFileIndex <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">str_detect</span>(NoiseSelectionTables[i],NoiseWaveFilesShort))</span>
<span id="cb12-17"><a href="part-1.-prepare-training-data.html#cb12-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-18"><a href="part-1.-prepare-training-data.html#cb12-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">DetectBLED</span>(<span class="at">input=</span>NoiseWaveFiles[SoundFileIndex],</span>
<span id="cb12-19"><a href="part-1.-prepare-training-data.html#cb12-19" aria-hidden="true" tabindex="-1"></a>           <span class="at">min.freq =</span> <span class="dv">400</span>, </span>
<span id="cb12-20"><a href="part-1.-prepare-training-data.html#cb12-20" aria-hidden="true" tabindex="-1"></a>           <span class="at">max.freq =</span> <span class="dv">1600</span>,</span>
<span id="cb12-21"><a href="part-1.-prepare-training-data.html#cb12-21" aria-hidden="true" tabindex="-1"></a>           <span class="at">noise.quantile.val=</span><span class="fl">0.3</span>,</span>
<span id="cb12-22"><a href="part-1.-prepare-training-data.html#cb12-22" aria-hidden="true" tabindex="-1"></a>           <span class="at">spectrogram.window =</span><span class="dv">512</span>,</span>
<span id="cb12-23"><a href="part-1.-prepare-training-data.html#cb12-23" aria-hidden="true" tabindex="-1"></a>           <span class="at">pattern.split =</span> <span class="st">&quot;.wav&quot;</span>, </span>
<span id="cb12-24"><a href="part-1.-prepare-training-data.html#cb12-24" aria-hidden="true" tabindex="-1"></a>           <span class="at">min.signal.dur =</span> <span class="dv">3</span>,</span>
<span id="cb12-25"><a href="part-1.-prepare-training-data.html#cb12-25" aria-hidden="true" tabindex="-1"></a>           <span class="at">max.sound.event.dur =</span> <span class="dv">12</span>, </span>
<span id="cb12-26"><a href="part-1.-prepare-training-data.html#cb12-26" aria-hidden="true" tabindex="-1"></a>           <span class="at">wav.output =</span> <span class="st">&quot;TRUE&quot;</span>, </span>
<span id="cb12-27"><a href="part-1.-prepare-training-data.html#cb12-27" aria-hidden="true" tabindex="-1"></a>           <span class="at">output.dir =</span> TrainingDataFolderLocation,</span>
<span id="cb12-28"><a href="part-1.-prepare-training-data.html#cb12-28" aria-hidden="true" tabindex="-1"></a>           <span class="at">swift.time=</span><span class="cn">TRUE</span>,</span>
<span id="cb12-29"><a href="part-1.-prepare-training-data.html#cb12-29" aria-hidden="true" tabindex="-1"></a>           <span class="at">time.start=</span><span class="dv">06</span>,</span>
<span id="cb12-30"><a href="part-1.-prepare-training-data.html#cb12-30" aria-hidden="true" tabindex="-1"></a>           <span class="at">time.stop=</span><span class="dv">11</span>,</span>
<span id="cb12-31"><a href="part-1.-prepare-training-data.html#cb12-31" aria-hidden="true" tabindex="-1"></a>           <span class="at">write.table.output=</span><span class="cn">TRUE</span>,</span>
<span id="cb12-32"><a href="part-1.-prepare-training-data.html#cb12-32" aria-hidden="true" tabindex="-1"></a>           <span class="at">verbose=</span><span class="cn">TRUE</span>,</span>
<span id="cb12-33"><a href="part-1.-prepare-training-data.html#cb12-33" aria-hidden="true" tabindex="-1"></a>           <span class="at">random.sample=</span><span class="cn">FALSE</span>)</span>
<span id="cb12-34"><a href="part-1.-prepare-training-data.html#cb12-34" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="now-read-in-clips-based-on-raven-selection-tables-and-calculate-mfccs" class="section level3 hasAnchor" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> Now read in clips based on Raven Selection tables and calculate MFCCs<a href="part-1.-prepare-training-data.html#now-read-in-clips-based-on-raven-selection-tables-and-calculate-mfccs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="part-1.-prepare-training-data.html#cb13-1" aria-hidden="true" tabindex="-1"></a>TrainingWavFilesDir <span class="ot">&lt;-</span> </span>
<span id="cb13-2"><a href="part-1.-prepare-training-data.html#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;/Users/denaclink/Desktop/RStudio Projects/gibbonR/data/TrainingDataFromRavenSelectionTables/&quot;</span></span>
<span id="cb13-3"><a href="part-1.-prepare-training-data.html#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="part-1.-prepare-training-data.html#cb13-4" aria-hidden="true" tabindex="-1"></a>trainingdata <span class="ot">&lt;-</span> gibbonR<span class="sc">::</span><span class="fu">MFCCFunction</span>(<span class="at">input.dir=</span>TrainingWavFilesDir, <span class="at">min.freq =</span> <span class="dv">400</span>, <span class="at">max.freq =</span> <span class="dv">1600</span>,<span class="at">win.avg=</span><span class="st">&quot;standard&quot;</span>)</span>
<span id="cb13-5"><a href="part-1.-prepare-training-data.html#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="part-1.-prepare-training-data.html#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="part-1.-prepare-training-data.html#cb13-7" aria-hidden="true" tabindex="-1"></a>trainingdata<span class="sc">$</span>class <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(trainingdata<span class="sc">$</span>class)</span></code></pre></div>
</div>
<div id="compare-random-forest-and-support-vector-machine-for-supervised-classification-1" class="section level3 hasAnchor" number="2.3.4">
<h3><span class="header-section-number">2.3.4</span> Compare Random Forest and Support Vector Machine for Supervised Classification<a href="part-1.-prepare-training-data.html#compare-random-forest-and-support-vector-machine-for-supervised-classification-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="part-1.-prepare-training-data.html#cb14-1" aria-hidden="true" tabindex="-1"></a>trainingdata<span class="sc">$</span>class <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(trainingdata<span class="sc">$</span>class)</span>
<span id="cb14-2"><a href="part-1.-prepare-training-data.html#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="part-1.-prepare-training-data.html#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="part-1.-prepare-training-data.html#cb14-4" aria-hidden="true" tabindex="-1"></a>ml.model.svm <span class="ot">&lt;-</span> e1071<span class="sc">::</span><span class="fu">svm</span>(trainingdata[, <span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(trainingdata)], trainingdata<span class="sc">$</span>class, <span class="at">kernel =</span> <span class="st">&quot;radial&quot;</span>, </span>
<span id="cb14-5"><a href="part-1.-prepare-training-data.html#cb14-5" aria-hidden="true" tabindex="-1"></a>                           <span class="at">cross =</span> <span class="dv">25</span>,</span>
<span id="cb14-6"><a href="part-1.-prepare-training-data.html#cb14-6" aria-hidden="true" tabindex="-1"></a>                           <span class="at">probability =</span> <span class="cn">TRUE</span>)</span>
<span id="cb14-7"><a href="part-1.-prepare-training-data.html#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="part-1.-prepare-training-data.html#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&#39;SVM accuracy&#39;</span>,ml.model.svm<span class="sc">$</span>tot.accuracy))</span></code></pre></div>
<pre><code>## [1] &quot;SVM accuracy 98.1132075471698&quot;</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="part-1.-prepare-training-data.html#cb16-1" aria-hidden="true" tabindex="-1"></a>ml.model.rf <span class="ot">&lt;-</span> randomForest<span class="sc">::</span><span class="fu">randomForest</span>(<span class="at">x=</span>trainingdata[, <span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(trainingdata)], <span class="at">y =</span> trainingdata<span class="sc">$</span>class)</span>
<span id="cb16-2"><a href="part-1.-prepare-training-data.html#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="part-1.-prepare-training-data.html#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="part-1.-prepare-training-data.html#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ml.model.rf)</span></code></pre></div>
<pre><code>## 
## Call:
##  randomForest(x = trainingdata[, 2:ncol(trainingdata)], y = trainingdata$class) 
##                Type of random forest: classification
##                      Number of trees: 500
## No. of variables tried at each split: 13
## 
##         OOB estimate of  error rate: 7.55%
## Confusion matrix:
##               female.gibbon noise class.error
## female.gibbon            24     2  0.07692308
## noise                     2    25  0.07407407</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="part-2.-run-the-detectorclassifier.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/01-Prepare-training-data.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["gibbonR_tutorial.pdf", "gibbonR_tutorial.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
