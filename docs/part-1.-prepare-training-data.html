<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1 Part 1. Prepare Training Data | gibbonR: An R package for the automated detection and classification of female gibbon calls from long-term acoustic recordings</title>
  <meta name="description" content="1 Part 1. Prepare Training Data | gibbonR: An R package for the automated detection and classification of female gibbon calls from long-term acoustic recordings" />
  <meta name="generator" content="bookdown 0.39 and GitBook 2.6.7" />

  <meta property="og:title" content="1 Part 1. Prepare Training Data | gibbonR: An R package for the automated detection and classification of female gibbon calls from long-term acoustic recordings" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="DenaJGibbon/gibbonR-tutorial" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1 Part 1. Prepare Training Data | gibbonR: An R package for the automated detection and classification of female gibbon calls from long-term acoustic recordings" />
  
  
  

<meta name="author" content="Dena J. Clink" />


<meta name="date" content="2024-06-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="package-summary.html"/>
<link rel="next" href="part-2.-run-the-detectorclassifier.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"> gibbonR </a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Package installation</a></li>
<li class="chapter" data-level="" data-path="package-summary.html"><a href="package-summary.html"><i class="fa fa-check"></i>Package summary</a></li>
<li class="chapter" data-level="1" data-path="part-1.-prepare-training-data.html"><a href="part-1.-prepare-training-data.html"><i class="fa fa-check"></i><b>1</b> Part 1. Prepare Training Data</a>
<ul>
<li class="chapter" data-level="1.1" data-path="part-1.-prepare-training-data.html"><a href="part-1.-prepare-training-data.html#download-the-data-from-github"><i class="fa fa-check"></i><b>1.1</b> Download the data from Github</a></li>
<li class="chapter" data-level="1.2" data-path="part-1.-prepare-training-data.html"><a href="part-1.-prepare-training-data.html#part-1a.-training-data-with-labeled-.wav-clips"><i class="fa fa-check"></i><b>1.2</b> Part 1A. Training Data with Labeled .wav clips</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="part-1.-prepare-training-data.html"><a href="part-1.-prepare-training-data.html#read-in-clips-and-calculate-mfccs"><i class="fa fa-check"></i><b>1.2.1</b> Read in clips and calculate MFCCs</a></li>
<li class="chapter" data-level="1.2.2" data-path="part-1.-prepare-training-data.html"><a href="part-1.-prepare-training-data.html#compare-random-forest-and-support-vector-machine-for-supervised-classification"><i class="fa fa-check"></i><b>1.2.2</b> Compare Random Forest and Support Vector Machine for Supervised Classification</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="part-1.-prepare-training-data.html"><a href="part-1.-prepare-training-data.html#part-1b.-training-data-with-raven-selection-tables"><i class="fa fa-check"></i><b>1.3</b> Part 1B. Training Data with Raven Selection Tables</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="part-1.-prepare-training-data.html"><a href="part-1.-prepare-training-data.html#prepare-training-data-from-labeled-annotations"><i class="fa fa-check"></i><b>1.3.1</b> Prepare training data from labeled annotations</a></li>
<li class="chapter" data-level="1.3.2" data-path="part-1.-prepare-training-data.html"><a href="part-1.-prepare-training-data.html#prepare-noise-training-data-from-files-without-target-signal"><i class="fa fa-check"></i><b>1.3.2</b> Prepare noise training data from files without target signal</a></li>
<li class="chapter" data-level="1.3.3" data-path="part-1.-prepare-training-data.html"><a href="part-1.-prepare-training-data.html#now-read-in-clips-based-on-raven-selection-tables-and-calculate-mfccs"><i class="fa fa-check"></i><b>1.3.3</b> Now read in clips based on Raven Selection tables and calculate MFCCs</a></li>
<li class="chapter" data-level="1.3.4" data-path="part-1.-prepare-training-data.html"><a href="part-1.-prepare-training-data.html#compare-random-forest-and-support-vector-machine-for-supervised-classification-1"><i class="fa fa-check"></i><b>1.3.4</b> Compare Random Forest and Support Vector Machine for Supervised Classification</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="part-2.-run-the-detectorclassifier.html"><a href="part-2.-run-the-detectorclassifier.html"><i class="fa fa-check"></i><b>2</b> Part 2. Run the detector/classifier</a>
<ul>
<li class="chapter" data-level="2.1" data-path="part-2.-run-the-detectorclassifier.html"><a href="part-2.-run-the-detectorclassifier.html#part-2a.-feature-extraction"><i class="fa fa-check"></i><b>2.1</b> Part 2a. Feature extraction</a></li>
<li class="chapter" data-level="2.2" data-path="part-2.-run-the-detectorclassifier.html"><a href="part-2.-run-the-detectorclassifier.html#part-2b.-run-the-detectorclassifier-using-the-gibbonr-function."><i class="fa fa-check"></i><b>2.2</b> Part 2b. Run the detector/classifier using the ‘gibbonR’ function.</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="part-4.-data-visualization.html"><a href="part-4.-data-visualization.html"><i class="fa fa-check"></i><b>3</b> Part 4. Data visualization</a>
<ul>
<li class="chapter" data-level="3.1" data-path="part-4.-data-visualization.html"><a href="part-4.-data-visualization.html#part-4a.-create-a-umap-plot-colored-by-class"><i class="fa fa-check"></i><b>3.1</b> Part 4a. Create a UMAP plot colored by class</a></li>
<li class="chapter" data-level="3.2" data-path="part-4.-data-visualization.html"><a href="part-4.-data-visualization.html#part-4b.-create-a-umap-plot-colored-by-affinity-propagation-clustering"><i class="fa fa-check"></i><b>3.2</b> Part 4b. Create a UMAP plot colored by affinity propagation clustering</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">gibbonR: An R package for the automated detection and classification of female gibbon calls from long-term acoustic recordings</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="part-1.-prepare-training-data" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">1</span> Part 1. Prepare Training Data<a href="part-1.-prepare-training-data.html#part-1.-prepare-training-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In ‘gibbonR’ there are two ways that you can format your training data. The first can be a set of labelled .wav clips with the class indicated in the name of the file (e.g., ‘gibbon_01.wav’ and ‘noise_01.wav’). The second is to have a folder of selection tables created in Raven Pro (K. Lisa Yang Center for Conservation Bioacoustics) and a folder with the associated ‘.wav’ files. For the second approach there must be an annotation column indicating the call type and it is assumed that all signals of interest are annotated, and the rest of the files contain only background noise.</p>
<div id="download-the-data-from-github" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> Download the data from Github<a href="part-1.-prepare-training-data.html#download-the-data-from-github" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="part-1.-prepare-training-data.html#cb2-1" tabindex="-1"></a><span class="co"># You need to tell R where to store the zip files on your computer.</span></span>
<span id="cb2-2"><a href="part-1.-prepare-training-data.html#cb2-2" tabindex="-1"></a>destination.file.path.zip <span class="ot">&lt;-</span></span>
<span id="cb2-3"><a href="part-1.-prepare-training-data.html#cb2-3" tabindex="-1"></a>  <span class="st">&quot;/Users/denaclink/Downloads/BorneoExampleData.zip&quot;</span></span>
<span id="cb2-4"><a href="part-1.-prepare-training-data.html#cb2-4" tabindex="-1"></a></span>
<span id="cb2-5"><a href="part-1.-prepare-training-data.html#cb2-5" tabindex="-1"></a><span class="co"># You also need to tell R where to save the unzipped files</span></span>
<span id="cb2-6"><a href="part-1.-prepare-training-data.html#cb2-6" tabindex="-1"></a>destination.file.path <span class="ot">&lt;-</span> <span class="st">&quot;/Users/denaclink/Library/CloudStorage/Box-Box/gibbonRSampleFiles/&quot;</span></span>
<span id="cb2-7"><a href="part-1.-prepare-training-data.html#cb2-7" tabindex="-1"></a></span>
<span id="cb2-8"><a href="part-1.-prepare-training-data.html#cb2-8" tabindex="-1"></a><span class="co"># This function will download the data from github</span></span>
<span id="cb2-9"><a href="part-1.-prepare-training-data.html#cb2-9" tabindex="-1"></a></span>
<span id="cb2-10"><a href="part-1.-prepare-training-data.html#cb2-10" tabindex="-1"></a>utils<span class="sc">::</span><span class="fu">download.file</span>(<span class="st">&quot;https://github.com/DenaJGibbon/BorneoExampleData/archive/master.zip&quot;</span>,</span>
<span id="cb2-11"><a href="part-1.-prepare-training-data.html#cb2-11" tabindex="-1"></a>                     <span class="at">destfile =</span> destination.file.path.zip)</span>
<span id="cb2-12"><a href="part-1.-prepare-training-data.html#cb2-12" tabindex="-1"></a></span>
<span id="cb2-13"><a href="part-1.-prepare-training-data.html#cb2-13" tabindex="-1"></a><span class="co"># This function will unzip the file</span></span>
<span id="cb2-14"><a href="part-1.-prepare-training-data.html#cb2-14" tabindex="-1"></a>utils<span class="sc">::</span><span class="fu">unzip</span>(<span class="at">zipfile =</span> destination.file.path.zip,</span>
<span id="cb2-15"><a href="part-1.-prepare-training-data.html#cb2-15" tabindex="-1"></a>             <span class="at">exdir =</span> destination.file.path)</span>
<span id="cb2-16"><a href="part-1.-prepare-training-data.html#cb2-16" tabindex="-1"></a></span>
<span id="cb2-17"><a href="part-1.-prepare-training-data.html#cb2-17" tabindex="-1"></a><span class="co"># Examine the contents</span></span>
<span id="cb2-18"><a href="part-1.-prepare-training-data.html#cb2-18" tabindex="-1"></a>list.of.sound.files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="fu">paste</span>(destination.file.path,</span>
<span id="cb2-19"><a href="part-1.-prepare-training-data.html#cb2-19" tabindex="-1"></a>                                        <span class="st">&quot;BorneoExampleData-master&quot;</span>, <span class="st">&quot;data&quot;</span>, <span class="at">sep =</span></span>
<span id="cb2-20"><a href="part-1.-prepare-training-data.html#cb2-20" tabindex="-1"></a>                                          <span class="st">&quot;/&quot;</span>),</span>
<span id="cb2-21"><a href="part-1.-prepare-training-data.html#cb2-21" tabindex="-1"></a>                                  <span class="at">full.names =</span> T)</span>
<span id="cb2-22"><a href="part-1.-prepare-training-data.html#cb2-22" tabindex="-1"></a>list.of.sound.files</span></code></pre></div>
<p>Use this function to read in the .RDA file and save it as an R object from <a href="https://stackoverflow.com/questions/5577221/how-can-i-load-an-object-into-a-variable-name-that-i-specify-from-an-r-data-file" class="uri">https://stackoverflow.com/questions/5577221/how-can-i-load-an-object-into-a-variable-name-that-i-specify-from-an-r-data-file</a></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="part-1.-prepare-training-data.html#cb3-1" tabindex="-1"></a>loadRData <span class="ot">&lt;-</span> <span class="cf">function</span>(fileName) {</span>
<span id="cb3-2"><a href="part-1.-prepare-training-data.html#cb3-2" tabindex="-1"></a>  <span class="co">#loads an RData file, and returns it</span></span>
<span id="cb3-3"><a href="part-1.-prepare-training-data.html#cb3-3" tabindex="-1"></a>  <span class="fu">load</span>(fileName)</span>
<span id="cb3-4"><a href="part-1.-prepare-training-data.html#cb3-4" tabindex="-1"></a>  <span class="fu">get</span>(<span class="fu">ls</span>()[<span class="fu">ls</span>() <span class="sc">!=</span> <span class="st">&quot;fileName&quot;</span>])</span>
<span id="cb3-5"><a href="part-1.-prepare-training-data.html#cb3-5" tabindex="-1"></a>}</span></code></pre></div>
<p>This function will load the entire list of r data files</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="part-1.-prepare-training-data.html#cb4-1" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">load_all</span>(<span class="st">&#39;/Users/denaclink/Desktop/RStudioProjects/gibbonR&#39;</span>)</span>
<span id="cb4-2"><a href="part-1.-prepare-training-data.html#cb4-2" tabindex="-1"></a><span class="co">#&gt; ℹ Loading gibbonR</span></span>
<span id="cb4-3"><a href="part-1.-prepare-training-data.html#cb4-3" tabindex="-1"></a></span>
<span id="cb4-4"><a href="part-1.-prepare-training-data.html#cb4-4" tabindex="-1"></a><span class="co"># You also need to tell R where to save the unzipped files</span></span>
<span id="cb4-5"><a href="part-1.-prepare-training-data.html#cb4-5" tabindex="-1"></a>destination.file.path <span class="ot">&lt;-</span> <span class="st">&quot;/Users/denaclink/Library/CloudStorage/Box-Box/gibbonRSampleFiles/&quot;</span></span>
<span id="cb4-6"><a href="part-1.-prepare-training-data.html#cb4-6" tabindex="-1"></a></span>
<span id="cb4-7"><a href="part-1.-prepare-training-data.html#cb4-7" tabindex="-1"></a><span class="co"># Examine the contents</span></span>
<span id="cb4-8"><a href="part-1.-prepare-training-data.html#cb4-8" tabindex="-1"></a>list.of.sound.files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="fu">paste</span>(destination.file.path,</span>
<span id="cb4-9"><a href="part-1.-prepare-training-data.html#cb4-9" tabindex="-1"></a>                                        <span class="st">&quot;BorneoExampleData-master&quot;</span>, <span class="st">&quot;data&quot;</span>, <span class="at">sep =</span></span>
<span id="cb4-10"><a href="part-1.-prepare-training-data.html#cb4-10" tabindex="-1"></a>                                          <span class="st">&quot;/&quot;</span>),</span>
<span id="cb4-11"><a href="part-1.-prepare-training-data.html#cb4-11" tabindex="-1"></a>                                  <span class="at">full.names =</span> T)</span>
<span id="cb4-12"><a href="part-1.-prepare-training-data.html#cb4-12" tabindex="-1"></a>list.of.sound.files</span>
<span id="cb4-13"><a href="part-1.-prepare-training-data.html#cb4-13" tabindex="-1"></a><span class="co">#&gt; [1] &quot;/Users/denaclink/Library/CloudStorage/Box-Box/gibbonRSampleFiles//BorneoExampleData-master/data/multi.class.training.rda&quot;            </span></span>
<span id="cb4-14"><a href="part-1.-prepare-training-data.html#cb4-14" tabindex="-1"></a><span class="co">#&gt; [2] &quot;/Users/denaclink/Library/CloudStorage/Box-Box/gibbonRSampleFiles//BorneoExampleData-master/data/S11_20180219_060002_1800sto3600s.rda&quot;</span></span>
<span id="cb4-15"><a href="part-1.-prepare-training-data.html#cb4-15" tabindex="-1"></a></span>
<span id="cb4-16"><a href="part-1.-prepare-training-data.html#cb4-16" tabindex="-1"></a>list.rda.files <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb4-17"><a href="part-1.-prepare-training-data.html#cb4-17" tabindex="-1"></a><span class="cf">for</span>(x <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(list.of.sound.files)){</span>
<span id="cb4-18"><a href="part-1.-prepare-training-data.html#cb4-18" tabindex="-1"></a>  list.rda.files[[x]] <span class="ot">&lt;-</span>  <span class="fu">loadRData</span>(list.of.sound.files[[x]])</span>
<span id="cb4-19"><a href="part-1.-prepare-training-data.html#cb4-19" tabindex="-1"></a>}</span></code></pre></div>
<p>Assign each rda an informative name</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="part-1.-prepare-training-data.html#cb5-1" tabindex="-1"></a>multi.class.list <span class="ot">&lt;-</span> list.rda.files[[<span class="dv">1</span>]]</span>
<span id="cb5-2"><a href="part-1.-prepare-training-data.html#cb5-2" tabindex="-1"></a>S11_20180219_060002_1800sto3600s <span class="ot">&lt;-</span> list.rda.files[[<span class="dv">2</span>]]</span></code></pre></div>
<p>Now we create a directory with the training .wav files</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="part-1.-prepare-training-data.html#cb6-1" tabindex="-1"></a>TrainingDataDirectory <span class="ot">&lt;-</span> <span class="st">&quot;/Users/denaclink/Library/CloudStorage/Box-Box/gibbonRSampleFiles/data/BorneoMultiClass/&quot;</span></span>
<span id="cb6-2"><a href="part-1.-prepare-training-data.html#cb6-2" tabindex="-1"></a><span class="co"># Create if doesn&#39;t already exist</span></span>
<span id="cb6-3"><a href="part-1.-prepare-training-data.html#cb6-3" tabindex="-1"></a><span class="fu">dir.create</span>(TrainingDataDirectory,<span class="at">recursive =</span> T)</span>
<span id="cb6-4"><a href="part-1.-prepare-training-data.html#cb6-4" tabindex="-1"></a></span>
<span id="cb6-5"><a href="part-1.-prepare-training-data.html#cb6-5" tabindex="-1"></a><span class="cf">for</span>(a <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(multi.class.list)){</span>
<span id="cb6-6"><a href="part-1.-prepare-training-data.html#cb6-6" tabindex="-1"></a>  Temp.element <span class="ot">&lt;-</span> multi.class.list[[a]]</span>
<span id="cb6-7"><a href="part-1.-prepare-training-data.html#cb6-7" tabindex="-1"></a>  <span class="fu">writeWave</span>(Temp.element[[<span class="dv">2</span>]], <span class="fu">paste</span>(TrainingDataDirectory,Temp.element[[<span class="dv">1</span>]],<span class="at">sep=</span><span class="st">&#39;/&#39;</span>))</span>
<span id="cb6-8"><a href="part-1.-prepare-training-data.html#cb6-8" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="part-1a.-training-data-with-labeled-.wav-clips" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> Part 1A. Training Data with Labeled .wav clips<a href="part-1.-prepare-training-data.html#part-1a.-training-data-with-labeled-.wav-clips" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="read-in-clips-and-calculate-mfccs" class="section level3 hasAnchor" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Read in clips and calculate MFCCs<a href="part-1.-prepare-training-data.html#read-in-clips-and-calculate-mfccs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="part-1.-prepare-training-data.html#cb7-1" tabindex="-1"></a></span>
<span id="cb7-2"><a href="part-1.-prepare-training-data.html#cb7-2" tabindex="-1"></a>TrainingDataDirectory <span class="ot">&lt;-</span> <span class="st">&quot;/Users/denaclink/Library/CloudStorage/Box-Box/gibbonRSampleFiles/data/BorneoMultiClass/&quot;</span></span>
<span id="cb7-3"><a href="part-1.-prepare-training-data.html#cb7-3" tabindex="-1"></a></span>
<span id="cb7-4"><a href="part-1.-prepare-training-data.html#cb7-4" tabindex="-1"></a>trainingdata <span class="ot">&lt;-</span> gibbonR<span class="sc">::</span><span class="fu">MFCCFunction</span>(<span class="at">input.dir=</span>TrainingDataDirectory, <span class="at">min.freq =</span> <span class="dv">400</span>, <span class="at">max.freq =</span> <span class="dv">1600</span>,<span class="at">win.avg=</span><span class="st">&quot;standard&quot;</span>)</span>
<span id="cb7-5"><a href="part-1.-prepare-training-data.html#cb7-5" tabindex="-1"></a></span>
<span id="cb7-6"><a href="part-1.-prepare-training-data.html#cb7-6" tabindex="-1"></a></span>
<span id="cb7-7"><a href="part-1.-prepare-training-data.html#cb7-7" tabindex="-1"></a>trainingdata<span class="sc">$</span>class <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(trainingdata<span class="sc">$</span>class)</span></code></pre></div>
</div>
<div id="compare-random-forest-and-support-vector-machine-for-supervised-classification" class="section level3 hasAnchor" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> Compare Random Forest and Support Vector Machine for Supervised Classification<a href="part-1.-prepare-training-data.html#compare-random-forest-and-support-vector-machine-for-supervised-classification" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Note that this approach uses k-fold cross-validation by splitting the training data into two splits over multiple iterations.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="part-1.-prepare-training-data.html#cb8-1" tabindex="-1"></a><span class="co"># Set seed for reproducilibility</span></span>
<span id="cb8-2"><a href="part-1.-prepare-training-data.html#cb8-2" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">3</span>)</span>
<span id="cb8-3"><a href="part-1.-prepare-training-data.html#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="part-1.-prepare-training-data.html#cb8-4" tabindex="-1"></a><span class="co"># Create an index to randomly sample 25 observations for test data</span></span>
<span id="cb8-5"><a href="part-1.-prepare-training-data.html#cb8-5" tabindex="-1"></a>testindex <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">75</span>,<span class="dv">25</span>,<span class="at">replace =</span> <span class="cn">FALSE</span>)</span>
<span id="cb8-6"><a href="part-1.-prepare-training-data.html#cb8-6" tabindex="-1"></a></span>
<span id="cb8-7"><a href="part-1.-prepare-training-data.html#cb8-7" tabindex="-1"></a><span class="co"># Isolate test data samples</span></span>
<span id="cb8-8"><a href="part-1.-prepare-training-data.html#cb8-8" tabindex="-1"></a>testdata <span class="ot">&lt;-</span> trainingdata[testindex,]</span>
<span id="cb8-9"><a href="part-1.-prepare-training-data.html#cb8-9" tabindex="-1"></a></span>
<span id="cb8-10"><a href="part-1.-prepare-training-data.html#cb8-10" tabindex="-1"></a><span class="co"># Remove from training data</span></span>
<span id="cb8-11"><a href="part-1.-prepare-training-data.html#cb8-11" tabindex="-1"></a>trainingdata_sub <span class="ot">&lt;-</span> trainingdata[<span class="sc">-</span>testindex,]</span>
<span id="cb8-12"><a href="part-1.-prepare-training-data.html#cb8-12" tabindex="-1"></a></span>
<span id="cb8-13"><a href="part-1.-prepare-training-data.html#cb8-13" tabindex="-1"></a><span class="co"># Ensure class is a factor</span></span>
<span id="cb8-14"><a href="part-1.-prepare-training-data.html#cb8-14" tabindex="-1"></a>trainingdata_sub<span class="sc">$</span>class <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(trainingdata_sub<span class="sc">$</span>class)</span>
<span id="cb8-15"><a href="part-1.-prepare-training-data.html#cb8-15" tabindex="-1"></a></span>
<span id="cb8-16"><a href="part-1.-prepare-training-data.html#cb8-16" tabindex="-1"></a><span class="co"># Run SVM</span></span>
<span id="cb8-17"><a href="part-1.-prepare-training-data.html#cb8-17" tabindex="-1"></a>ml.model.svm <span class="ot">&lt;-</span> e1071<span class="sc">::</span><span class="fu">svm</span>(trainingdata_sub[, <span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(trainingdata_sub)], trainingdata_sub<span class="sc">$</span>class, <span class="at">kernel =</span> <span class="st">&quot;radial&quot;</span>, </span>
<span id="cb8-18"><a href="part-1.-prepare-training-data.html#cb8-18" tabindex="-1"></a>                           <span class="at">cross =</span> <span class="dv">25</span>,</span>
<span id="cb8-19"><a href="part-1.-prepare-training-data.html#cb8-19" tabindex="-1"></a>                           <span class="at">probability =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-20"><a href="part-1.-prepare-training-data.html#cb8-20" tabindex="-1"></a></span>
<span id="cb8-21"><a href="part-1.-prepare-training-data.html#cb8-21" tabindex="-1"></a><span class="co"># Predict SVM on test data</span></span>
<span id="cb8-22"><a href="part-1.-prepare-training-data.html#cb8-22" tabindex="-1"></a>svm.predict.labels <span class="ot">&lt;-</span> <span class="fu">predict</span>(ml.model.svm,testdata[,<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>)])</span>
<span id="cb8-23"><a href="part-1.-prepare-training-data.html#cb8-23" tabindex="-1"></a></span>
<span id="cb8-24"><a href="part-1.-prepare-training-data.html#cb8-24" tabindex="-1"></a><span class="co"># Create a confusion matrix</span></span>
<span id="cb8-25"><a href="part-1.-prepare-training-data.html#cb8-25" tabindex="-1"></a>caret<span class="sc">::</span><span class="fu">confusionMatrix</span>(svm.predict.labels,testdata<span class="sc">$</span>class)</span>
<span id="cb8-26"><a href="part-1.-prepare-training-data.html#cb8-26" tabindex="-1"></a><span class="co">#&gt; Confusion Matrix and Statistics</span></span>
<span id="cb8-27"><a href="part-1.-prepare-training-data.html#cb8-27" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb8-28"><a href="part-1.-prepare-training-data.html#cb8-28" tabindex="-1"></a><span class="co">#&gt;                Reference</span></span>
<span id="cb8-29"><a href="part-1.-prepare-training-data.html#cb8-29" tabindex="-1"></a><span class="co">#&gt; Prediction      female.gibbon leaf.monkey noise solo.gibbon</span></span>
<span id="cb8-30"><a href="part-1.-prepare-training-data.html#cb8-30" tabindex="-1"></a><span class="co">#&gt;   female.gibbon             7           0     0           0</span></span>
<span id="cb8-31"><a href="part-1.-prepare-training-data.html#cb8-31" tabindex="-1"></a><span class="co">#&gt;   leaf.monkey               0           1     0           0</span></span>
<span id="cb8-32"><a href="part-1.-prepare-training-data.html#cb8-32" tabindex="-1"></a><span class="co">#&gt;   noise                     1           1     8           0</span></span>
<span id="cb8-33"><a href="part-1.-prepare-training-data.html#cb8-33" tabindex="-1"></a><span class="co">#&gt;   solo.gibbon               0           0     0           7</span></span>
<span id="cb8-34"><a href="part-1.-prepare-training-data.html#cb8-34" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb8-35"><a href="part-1.-prepare-training-data.html#cb8-35" tabindex="-1"></a><span class="co">#&gt; Overall Statistics</span></span>
<span id="cb8-36"><a href="part-1.-prepare-training-data.html#cb8-36" tabindex="-1"></a><span class="co">#&gt;                                           </span></span>
<span id="cb8-37"><a href="part-1.-prepare-training-data.html#cb8-37" tabindex="-1"></a><span class="co">#&gt;                Accuracy : 0.92            </span></span>
<span id="cb8-38"><a href="part-1.-prepare-training-data.html#cb8-38" tabindex="-1"></a><span class="co">#&gt;                  95% CI : (0.7397, 0.9902)</span></span>
<span id="cb8-39"><a href="part-1.-prepare-training-data.html#cb8-39" tabindex="-1"></a><span class="co">#&gt;     No Information Rate : 0.32            </span></span>
<span id="cb8-40"><a href="part-1.-prepare-training-data.html#cb8-40" tabindex="-1"></a><span class="co">#&gt;     P-Value [Acc &gt; NIR] : 5.992e-10       </span></span>
<span id="cb8-41"><a href="part-1.-prepare-training-data.html#cb8-41" tabindex="-1"></a><span class="co">#&gt;                                           </span></span>
<span id="cb8-42"><a href="part-1.-prepare-training-data.html#cb8-42" tabindex="-1"></a><span class="co">#&gt;                   Kappa : 0.8858          </span></span>
<span id="cb8-43"><a href="part-1.-prepare-training-data.html#cb8-43" tabindex="-1"></a><span class="co">#&gt;                                           </span></span>
<span id="cb8-44"><a href="part-1.-prepare-training-data.html#cb8-44" tabindex="-1"></a><span class="co">#&gt;  Mcnemar&#39;s Test P-Value : NA              </span></span>
<span id="cb8-45"><a href="part-1.-prepare-training-data.html#cb8-45" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb8-46"><a href="part-1.-prepare-training-data.html#cb8-46" tabindex="-1"></a><span class="co">#&gt; Statistics by Class:</span></span>
<span id="cb8-47"><a href="part-1.-prepare-training-data.html#cb8-47" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb8-48"><a href="part-1.-prepare-training-data.html#cb8-48" tabindex="-1"></a><span class="co">#&gt;                      Class: female.gibbon Class: leaf.monkey Class: noise Class: solo.gibbon</span></span>
<span id="cb8-49"><a href="part-1.-prepare-training-data.html#cb8-49" tabindex="-1"></a><span class="co">#&gt; Sensitivity                        0.8750             0.5000       1.0000               1.00</span></span>
<span id="cb8-50"><a href="part-1.-prepare-training-data.html#cb8-50" tabindex="-1"></a><span class="co">#&gt; Specificity                        1.0000             1.0000       0.8824               1.00</span></span>
<span id="cb8-51"><a href="part-1.-prepare-training-data.html#cb8-51" tabindex="-1"></a><span class="co">#&gt; Pos Pred Value                     1.0000             1.0000       0.8000               1.00</span></span>
<span id="cb8-52"><a href="part-1.-prepare-training-data.html#cb8-52" tabindex="-1"></a><span class="co">#&gt; Neg Pred Value                     0.9444             0.9583       1.0000               1.00</span></span>
<span id="cb8-53"><a href="part-1.-prepare-training-data.html#cb8-53" tabindex="-1"></a><span class="co">#&gt; Prevalence                         0.3200             0.0800       0.3200               0.28</span></span>
<span id="cb8-54"><a href="part-1.-prepare-training-data.html#cb8-54" tabindex="-1"></a><span class="co">#&gt; Detection Rate                     0.2800             0.0400       0.3200               0.28</span></span>
<span id="cb8-55"><a href="part-1.-prepare-training-data.html#cb8-55" tabindex="-1"></a><span class="co">#&gt; Detection Prevalence               0.2800             0.0400       0.4000               0.28</span></span>
<span id="cb8-56"><a href="part-1.-prepare-training-data.html#cb8-56" tabindex="-1"></a><span class="co">#&gt; Balanced Accuracy                  0.9375             0.7500       0.9412               1.00</span></span>
<span id="cb8-57"><a href="part-1.-prepare-training-data.html#cb8-57" tabindex="-1"></a></span>
<span id="cb8-58"><a href="part-1.-prepare-training-data.html#cb8-58" tabindex="-1"></a><span class="co"># Run Random Forest</span></span>
<span id="cb8-59"><a href="part-1.-prepare-training-data.html#cb8-59" tabindex="-1"></a>ml.model.rf <span class="ot">&lt;-</span> randomForest<span class="sc">::</span><span class="fu">randomForest</span>(<span class="at">x=</span>trainingdata_sub[, <span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(trainingdata_sub)], <span class="at">y =</span> trainingdata_sub<span class="sc">$</span>class)</span>
<span id="cb8-60"><a href="part-1.-prepare-training-data.html#cb8-60" tabindex="-1"></a></span>
<span id="cb8-61"><a href="part-1.-prepare-training-data.html#cb8-61" tabindex="-1"></a><span class="co"># Predict RF on test data</span></span>
<span id="cb8-62"><a href="part-1.-prepare-training-data.html#cb8-62" tabindex="-1"></a>rf.predict.labels <span class="ot">&lt;-</span> <span class="fu">predict</span>(ml.model.rf,testdata[,<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>)])</span>
<span id="cb8-63"><a href="part-1.-prepare-training-data.html#cb8-63" tabindex="-1"></a></span>
<span id="cb8-64"><a href="part-1.-prepare-training-data.html#cb8-64" tabindex="-1"></a><span class="co"># Create a confusion matrix</span></span>
<span id="cb8-65"><a href="part-1.-prepare-training-data.html#cb8-65" tabindex="-1"></a>caret<span class="sc">::</span><span class="fu">confusionMatrix</span>(rf.predict.labels,testdata<span class="sc">$</span>class)</span>
<span id="cb8-66"><a href="part-1.-prepare-training-data.html#cb8-66" tabindex="-1"></a><span class="co">#&gt; Confusion Matrix and Statistics</span></span>
<span id="cb8-67"><a href="part-1.-prepare-training-data.html#cb8-67" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb8-68"><a href="part-1.-prepare-training-data.html#cb8-68" tabindex="-1"></a><span class="co">#&gt;                Reference</span></span>
<span id="cb8-69"><a href="part-1.-prepare-training-data.html#cb8-69" tabindex="-1"></a><span class="co">#&gt; Prediction      female.gibbon leaf.monkey noise solo.gibbon</span></span>
<span id="cb8-70"><a href="part-1.-prepare-training-data.html#cb8-70" tabindex="-1"></a><span class="co">#&gt;   female.gibbon             7           0     0           0</span></span>
<span id="cb8-71"><a href="part-1.-prepare-training-data.html#cb8-71" tabindex="-1"></a><span class="co">#&gt;   leaf.monkey               0           1     0           1</span></span>
<span id="cb8-72"><a href="part-1.-prepare-training-data.html#cb8-72" tabindex="-1"></a><span class="co">#&gt;   noise                     1           1     8           1</span></span>
<span id="cb8-73"><a href="part-1.-prepare-training-data.html#cb8-73" tabindex="-1"></a><span class="co">#&gt;   solo.gibbon               0           0     0           5</span></span>
<span id="cb8-74"><a href="part-1.-prepare-training-data.html#cb8-74" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb8-75"><a href="part-1.-prepare-training-data.html#cb8-75" tabindex="-1"></a><span class="co">#&gt; Overall Statistics</span></span>
<span id="cb8-76"><a href="part-1.-prepare-training-data.html#cb8-76" tabindex="-1"></a><span class="co">#&gt;                                           </span></span>
<span id="cb8-77"><a href="part-1.-prepare-training-data.html#cb8-77" tabindex="-1"></a><span class="co">#&gt;                Accuracy : 0.84            </span></span>
<span id="cb8-78"><a href="part-1.-prepare-training-data.html#cb8-78" tabindex="-1"></a><span class="co">#&gt;                  95% CI : (0.6392, 0.9546)</span></span>
<span id="cb8-79"><a href="part-1.-prepare-training-data.html#cb8-79" tabindex="-1"></a><span class="co">#&gt;     No Information Rate : 0.32            </span></span>
<span id="cb8-80"><a href="part-1.-prepare-training-data.html#cb8-80" tabindex="-1"></a><span class="co">#&gt;     P-Value [Acc &gt; NIR] : 1.197e-07       </span></span>
<span id="cb8-81"><a href="part-1.-prepare-training-data.html#cb8-81" tabindex="-1"></a><span class="co">#&gt;                                           </span></span>
<span id="cb8-82"><a href="part-1.-prepare-training-data.html#cb8-82" tabindex="-1"></a><span class="co">#&gt;                   Kappa : 0.7738          </span></span>
<span id="cb8-83"><a href="part-1.-prepare-training-data.html#cb8-83" tabindex="-1"></a><span class="co">#&gt;                                           </span></span>
<span id="cb8-84"><a href="part-1.-prepare-training-data.html#cb8-84" tabindex="-1"></a><span class="co">#&gt;  Mcnemar&#39;s Test P-Value : NA              </span></span>
<span id="cb8-85"><a href="part-1.-prepare-training-data.html#cb8-85" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb8-86"><a href="part-1.-prepare-training-data.html#cb8-86" tabindex="-1"></a><span class="co">#&gt; Statistics by Class:</span></span>
<span id="cb8-87"><a href="part-1.-prepare-training-data.html#cb8-87" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb8-88"><a href="part-1.-prepare-training-data.html#cb8-88" tabindex="-1"></a><span class="co">#&gt;                      Class: female.gibbon Class: leaf.monkey Class: noise Class: solo.gibbon</span></span>
<span id="cb8-89"><a href="part-1.-prepare-training-data.html#cb8-89" tabindex="-1"></a><span class="co">#&gt; Sensitivity                        0.8750             0.5000       1.0000             0.7143</span></span>
<span id="cb8-90"><a href="part-1.-prepare-training-data.html#cb8-90" tabindex="-1"></a><span class="co">#&gt; Specificity                        1.0000             0.9565       0.8235             1.0000</span></span>
<span id="cb8-91"><a href="part-1.-prepare-training-data.html#cb8-91" tabindex="-1"></a><span class="co">#&gt; Pos Pred Value                     1.0000             0.5000       0.7273             1.0000</span></span>
<span id="cb8-92"><a href="part-1.-prepare-training-data.html#cb8-92" tabindex="-1"></a><span class="co">#&gt; Neg Pred Value                     0.9444             0.9565       1.0000             0.9000</span></span>
<span id="cb8-93"><a href="part-1.-prepare-training-data.html#cb8-93" tabindex="-1"></a><span class="co">#&gt; Prevalence                         0.3200             0.0800       0.3200             0.2800</span></span>
<span id="cb8-94"><a href="part-1.-prepare-training-data.html#cb8-94" tabindex="-1"></a><span class="co">#&gt; Detection Rate                     0.2800             0.0400       0.3200             0.2000</span></span>
<span id="cb8-95"><a href="part-1.-prepare-training-data.html#cb8-95" tabindex="-1"></a><span class="co">#&gt; Detection Prevalence               0.2800             0.0800       0.4400             0.2000</span></span>
<span id="cb8-96"><a href="part-1.-prepare-training-data.html#cb8-96" tabindex="-1"></a><span class="co">#&gt; Balanced Accuracy                  0.9375             0.7283       0.9118             0.8571</span></span></code></pre></div>
</div>
</div>
<div id="part-1b.-training-data-with-raven-selection-tables" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> Part 1B. Training Data with Raven Selection Tables<a href="part-1.-prepare-training-data.html#part-1b.-training-data-with-raven-selection-tables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="prepare-training-data-from-labeled-annotations" class="section level3 hasAnchor" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Prepare training data from labeled annotations<a href="part-1.-prepare-training-data.html#prepare-training-data-from-labeled-annotations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="part-1.-prepare-training-data.html#cb9-1" tabindex="-1"></a><span class="co"># Specify the folder where the training data will be saved</span></span>
<span id="cb9-2"><a href="part-1.-prepare-training-data.html#cb9-2" tabindex="-1"></a>TrainingDataFolderLocation <span class="ot">&lt;-</span> <span class="st">&quot;/Users/denaclink/Library/CloudStorage/Box-Box/gibbonRSampleFiles/TrainingDataFromRavenSelectionTables&quot;</span></span>
<span id="cb9-3"><a href="part-1.-prepare-training-data.html#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="part-1.-prepare-training-data.html#cb9-4" tabindex="-1"></a><span class="co"># Directory with annotated selection tables</span></span>
<span id="cb9-5"><a href="part-1.-prepare-training-data.html#cb9-5" tabindex="-1"></a>AnnotatedSelectionTables <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&quot;/Users/denaclink/Library/CloudStorage/Box-Box/gibbonRSampleFiles/SelectionTables/GibbonTrainingSelectionTables/&quot;</span>,</span>
<span id="cb9-6"><a href="part-1.-prepare-training-data.html#cb9-6" tabindex="-1"></a>                                       <span class="at">full.names =</span> T)</span>
<span id="cb9-7"><a href="part-1.-prepare-training-data.html#cb9-7" tabindex="-1"></a></span>
<span id="cb9-8"><a href="part-1.-prepare-training-data.html#cb9-8" tabindex="-1"></a><span class="co"># Directory with corresponding .wav files</span></span>
<span id="cb9-9"><a href="part-1.-prepare-training-data.html#cb9-9" tabindex="-1"></a>AnnotatedWaveFiles <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&quot;/Users/denaclink/Library/CloudStorage/Box-Box/gibbonRSampleFiles/GibbonTrainingFiles/&quot;</span>,<span class="at">full.names =</span> T)</span>
<span id="cb9-10"><a href="part-1.-prepare-training-data.html#cb9-10" tabindex="-1"></a>AnnotatedWaveFilesShort <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&quot;/Users/denaclink/Library/CloudStorage/Box-Box/gibbonRSampleFiles/GibbonTrainingFiles/&quot;</span>,<span class="at">full.names =</span> F)</span>
<span id="cb9-11"><a href="part-1.-prepare-training-data.html#cb9-11" tabindex="-1"></a>AnnotatedWaveFilesShort <span class="ot">&lt;-</span> <span class="fu">str_split_fixed</span>(AnnotatedWaveFilesShort,<span class="at">pattern =</span> <span class="st">&#39;.wav&#39;</span>, <span class="at">n=</span><span class="dv">2</span>)[,<span class="dv">1</span>]</span>
<span id="cb9-12"><a href="part-1.-prepare-training-data.html#cb9-12" tabindex="-1"></a></span>
<span id="cb9-13"><a href="part-1.-prepare-training-data.html#cb9-13" tabindex="-1"></a><span class="co"># Loop to cut out the corresponding annotations into short clips</span></span>
<span id="cb9-14"><a href="part-1.-prepare-training-data.html#cb9-14" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span> <span class="fu">length</span>(AnnotatedSelectionTables)){</span>
<span id="cb9-15"><a href="part-1.-prepare-training-data.html#cb9-15" tabindex="-1"></a>  </span>
<span id="cb9-16"><a href="part-1.-prepare-training-data.html#cb9-16" tabindex="-1"></a>  <span class="co"># Read in selection table</span></span>
<span id="cb9-17"><a href="part-1.-prepare-training-data.html#cb9-17" tabindex="-1"></a>  TempSelectionTable <span class="ot">&lt;-</span> <span class="fu">read.delim2</span>(AnnotatedSelectionTables[i])</span>
<span id="cb9-18"><a href="part-1.-prepare-training-data.html#cb9-18" tabindex="-1"></a>  </span>
<span id="cb9-19"><a href="part-1.-prepare-training-data.html#cb9-19" tabindex="-1"></a>  <span class="co"># Find the corresponding soundfile</span></span>
<span id="cb9-20"><a href="part-1.-prepare-training-data.html#cb9-20" tabindex="-1"></a>  SoundFileIndex <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">str_detect</span>(AnnotatedSelectionTables[i],AnnotatedWaveFilesShort))</span>
<span id="cb9-21"><a href="part-1.-prepare-training-data.html#cb9-21" tabindex="-1"></a>  </span>
<span id="cb9-22"><a href="part-1.-prepare-training-data.html#cb9-22" tabindex="-1"></a>  TempAnnotateWave <span class="ot">&lt;-</span> <span class="fu">readWave</span>(AnnotatedWaveFiles[SoundFileIndex])</span>
<span id="cb9-23"><a href="part-1.-prepare-training-data.html#cb9-23" tabindex="-1"></a>  </span>
<span id="cb9-24"><a href="part-1.-prepare-training-data.html#cb9-24" tabindex="-1"></a>  ShortSoundClips <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(TempSelectionTable),</span>
<span id="cb9-25"><a href="part-1.-prepare-training-data.html#cb9-25" tabindex="-1"></a>                                <span class="cf">function</span>(j) <span class="fu">extractWave</span>(TempAnnotateWave,</span>
<span id="cb9-26"><a href="part-1.-prepare-training-data.html#cb9-26" tabindex="-1"></a>                                                        <span class="at">from=</span> <span class="fu">as.numeric</span>(TempSelectionTable[j,]<span class="sc">$</span>Begin.Time..s.),</span>
<span id="cb9-27"><a href="part-1.-prepare-training-data.html#cb9-27" tabindex="-1"></a>                                                        <span class="at">to=</span><span class="fu">as.numeric</span>(TempSelectionTable[j,]<span class="sc">$</span> End.Time..s.),</span>
<span id="cb9-28"><a href="part-1.-prepare-training-data.html#cb9-28" tabindex="-1"></a>                                                        <span class="at">xunit =</span> <span class="fu">c</span>(<span class="st">&quot;time&quot;</span>),<span class="at">plot=</span>F,<span class="at">output=</span><span class="st">&quot;Wave&quot;</span>))</span>
<span id="cb9-29"><a href="part-1.-prepare-training-data.html#cb9-29" tabindex="-1"></a>  <span class="co"># Write wave files to folder</span></span>
<span id="cb9-30"><a href="part-1.-prepare-training-data.html#cb9-30" tabindex="-1"></a>  <span class="cf">for</span>(k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(ShortSoundClips)){</span>
<span id="cb9-31"><a href="part-1.-prepare-training-data.html#cb9-31" tabindex="-1"></a>    TempClip <span class="ot">&lt;-</span> ShortSoundClips[[k]]</span>
<span id="cb9-32"><a href="part-1.-prepare-training-data.html#cb9-32" tabindex="-1"></a>    WavFileName <span class="ot">&lt;-</span> <span class="fu">paste</span>(TrainingDataFolderLocation,<span class="st">&#39;/female.gibbon_&#39;</span>, k, <span class="st">&#39;.wav&#39;</span>,<span class="at">sep=</span><span class="st">&quot;&quot;</span>)</span>
<span id="cb9-33"><a href="part-1.-prepare-training-data.html#cb9-33" tabindex="-1"></a>    <span class="fu">writeWave</span>(TempClip,WavFileName,<span class="at">extensible =</span> F)</span>
<span id="cb9-34"><a href="part-1.-prepare-training-data.html#cb9-34" tabindex="-1"></a>  }</span>
<span id="cb9-35"><a href="part-1.-prepare-training-data.html#cb9-35" tabindex="-1"></a>  </span>
<span id="cb9-36"><a href="part-1.-prepare-training-data.html#cb9-36" tabindex="-1"></a>  </span>
<span id="cb9-37"><a href="part-1.-prepare-training-data.html#cb9-37" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="prepare-noise-training-data-from-files-without-target-signal" class="section level3 hasAnchor" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> Prepare noise training data from files without target signal<a href="part-1.-prepare-training-data.html#prepare-noise-training-data-from-files-without-target-signal" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="part-1.-prepare-training-data.html#cb10-1" tabindex="-1"></a><span class="co"># Specify the folder where the training data will be saved</span></span>
<span id="cb10-2"><a href="part-1.-prepare-training-data.html#cb10-2" tabindex="-1"></a>TrainingDataFolderLocation <span class="ot">&lt;-</span> <span class="st">&quot;/Users/denaclink/Library/CloudStorage/Box-Box/gibbonRSampleFiles/TrainingDataFromRavenSelectionTables/&quot;</span></span>
<span id="cb10-3"><a href="part-1.-prepare-training-data.html#cb10-3" tabindex="-1"></a></span>
<span id="cb10-4"><a href="part-1.-prepare-training-data.html#cb10-4" tabindex="-1"></a><span class="co"># Directory with annotated selection tables</span></span>
<span id="cb10-5"><a href="part-1.-prepare-training-data.html#cb10-5" tabindex="-1"></a>NoiseSelectionTables <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&quot;/Users/denaclink/Library/CloudStorage/Box-Box/gibbonRSampleFiles/SelectionTables/NoiseSelectionTables/&quot;</span>,</span>
<span id="cb10-6"><a href="part-1.-prepare-training-data.html#cb10-6" tabindex="-1"></a>                                       <span class="at">full.names =</span> T)</span>
<span id="cb10-7"><a href="part-1.-prepare-training-data.html#cb10-7" tabindex="-1"></a></span>
<span id="cb10-8"><a href="part-1.-prepare-training-data.html#cb10-8" tabindex="-1"></a><span class="co"># Directory with corresponding .wav files</span></span>
<span id="cb10-9"><a href="part-1.-prepare-training-data.html#cb10-9" tabindex="-1"></a>NoiseWaveFiles <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&quot;/Users/denaclink/Library/CloudStorage/Box-Box/gibbonRSampleFiles/NoiseFiles/&quot;</span>,<span class="at">full.names =</span> T)</span>
<span id="cb10-10"><a href="part-1.-prepare-training-data.html#cb10-10" tabindex="-1"></a>NoiseWaveFilesShort <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&quot;/Users/denaclink/Library/CloudStorage/Box-Box/gibbonRSampleFiles/NoiseFiles/&quot;</span>,<span class="at">full.names =</span> F)</span>
<span id="cb10-11"><a href="part-1.-prepare-training-data.html#cb10-11" tabindex="-1"></a>NoiseWaveFilesShort <span class="ot">&lt;-</span> <span class="fu">str_split_fixed</span>(NoiseWaveFilesShort,<span class="at">pattern =</span> <span class="st">&#39;.wav&#39;</span>, <span class="at">n=</span><span class="dv">2</span>)[,<span class="dv">1</span>]</span>
<span id="cb10-12"><a href="part-1.-prepare-training-data.html#cb10-12" tabindex="-1"></a></span>
<span id="cb10-13"><a href="part-1.-prepare-training-data.html#cb10-13" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(NoiseSelectionTables)){</span>
<span id="cb10-14"><a href="part-1.-prepare-training-data.html#cb10-14" tabindex="-1"></a>  </span>
<span id="cb10-15"><a href="part-1.-prepare-training-data.html#cb10-15" tabindex="-1"></a>  <span class="co"># Find the corresponding soundfile</span></span>
<span id="cb10-16"><a href="part-1.-prepare-training-data.html#cb10-16" tabindex="-1"></a>  SoundFileIndex <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">str_detect</span>(NoiseSelectionTables[i],NoiseWaveFilesShort))</span>
<span id="cb10-17"><a href="part-1.-prepare-training-data.html#cb10-17" tabindex="-1"></a></span>
<span id="cb10-18"><a href="part-1.-prepare-training-data.html#cb10-18" tabindex="-1"></a>  <span class="fu">DetectBLED</span>(<span class="at">input=</span>NoiseWaveFiles[SoundFileIndex],</span>
<span id="cb10-19"><a href="part-1.-prepare-training-data.html#cb10-19" tabindex="-1"></a>           <span class="at">min.freq =</span> <span class="dv">400</span>, </span>
<span id="cb10-20"><a href="part-1.-prepare-training-data.html#cb10-20" tabindex="-1"></a>           <span class="at">max.freq =</span> <span class="dv">1600</span>,</span>
<span id="cb10-21"><a href="part-1.-prepare-training-data.html#cb10-21" tabindex="-1"></a>           <span class="at">noise.quantile.val=</span><span class="fl">0.3</span>,</span>
<span id="cb10-22"><a href="part-1.-prepare-training-data.html#cb10-22" tabindex="-1"></a>           <span class="at">spectrogram.window =</span><span class="dv">512</span>,</span>
<span id="cb10-23"><a href="part-1.-prepare-training-data.html#cb10-23" tabindex="-1"></a>           <span class="at">pattern.split =</span> <span class="st">&quot;.wav&quot;</span>, </span>
<span id="cb10-24"><a href="part-1.-prepare-training-data.html#cb10-24" tabindex="-1"></a>           <span class="at">min.signal.dur =</span> <span class="dv">3</span>,</span>
<span id="cb10-25"><a href="part-1.-prepare-training-data.html#cb10-25" tabindex="-1"></a>           <span class="at">max.sound.event.dur =</span> <span class="dv">12</span>, </span>
<span id="cb10-26"><a href="part-1.-prepare-training-data.html#cb10-26" tabindex="-1"></a>           <span class="at">wav.output =</span> <span class="st">&quot;TRUE&quot;</span>, </span>
<span id="cb10-27"><a href="part-1.-prepare-training-data.html#cb10-27" tabindex="-1"></a>           <span class="at">output.dir =</span> TrainingDataFolderLocation,</span>
<span id="cb10-28"><a href="part-1.-prepare-training-data.html#cb10-28" tabindex="-1"></a>           <span class="at">swift.time=</span><span class="cn">TRUE</span>,</span>
<span id="cb10-29"><a href="part-1.-prepare-training-data.html#cb10-29" tabindex="-1"></a>           <span class="at">time.start=</span><span class="dv">06</span>,</span>
<span id="cb10-30"><a href="part-1.-prepare-training-data.html#cb10-30" tabindex="-1"></a>           <span class="at">time.stop=</span><span class="dv">11</span>,</span>
<span id="cb10-31"><a href="part-1.-prepare-training-data.html#cb10-31" tabindex="-1"></a>           <span class="at">write.table.output=</span><span class="cn">TRUE</span>,</span>
<span id="cb10-32"><a href="part-1.-prepare-training-data.html#cb10-32" tabindex="-1"></a>           <span class="at">verbose=</span><span class="cn">TRUE</span>,</span>
<span id="cb10-33"><a href="part-1.-prepare-training-data.html#cb10-33" tabindex="-1"></a>           <span class="at">random.sample=</span><span class="cn">FALSE</span>)</span>
<span id="cb10-34"><a href="part-1.-prepare-training-data.html#cb10-34" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="now-read-in-clips-based-on-raven-selection-tables-and-calculate-mfccs" class="section level3 hasAnchor" number="1.3.3">
<h3><span class="header-section-number">1.3.3</span> Now read in clips based on Raven Selection tables and calculate MFCCs<a href="part-1.-prepare-training-data.html#now-read-in-clips-based-on-raven-selection-tables-and-calculate-mfccs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="part-1.-prepare-training-data.html#cb11-1" tabindex="-1"></a></span>
<span id="cb11-2"><a href="part-1.-prepare-training-data.html#cb11-2" tabindex="-1"></a>TrainingWavFilesDir <span class="ot">&lt;-</span> </span>
<span id="cb11-3"><a href="part-1.-prepare-training-data.html#cb11-3" tabindex="-1"></a>  <span class="st">&quot;/Users/denaclink/Library/CloudStorage/Box-Box/gibbonRSampleFiles/TrainingDataFromRavenSelectionTables/&quot;</span></span>
<span id="cb11-4"><a href="part-1.-prepare-training-data.html#cb11-4" tabindex="-1"></a></span>
<span id="cb11-5"><a href="part-1.-prepare-training-data.html#cb11-5" tabindex="-1"></a>trainingdata <span class="ot">&lt;-</span> gibbonR<span class="sc">::</span><span class="fu">MFCCFunction</span>(<span class="at">input.dir=</span>TrainingWavFilesDir, <span class="at">min.freq =</span> <span class="dv">400</span>, <span class="at">max.freq =</span> <span class="dv">1600</span>,<span class="at">win.avg=</span><span class="st">&quot;standard&quot;</span>)</span>
<span id="cb11-6"><a href="part-1.-prepare-training-data.html#cb11-6" tabindex="-1"></a></span>
<span id="cb11-7"><a href="part-1.-prepare-training-data.html#cb11-7" tabindex="-1"></a></span>
<span id="cb11-8"><a href="part-1.-prepare-training-data.html#cb11-8" tabindex="-1"></a>trainingdata<span class="sc">$</span>class <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(trainingdata<span class="sc">$</span>class)</span></code></pre></div>
</div>
<div id="compare-random-forest-and-support-vector-machine-for-supervised-classification-1" class="section level3 hasAnchor" number="1.3.4">
<h3><span class="header-section-number">1.3.4</span> Compare Random Forest and Support Vector Machine for Supervised Classification<a href="part-1.-prepare-training-data.html#compare-random-forest-and-support-vector-machine-for-supervised-classification-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="part-1.-prepare-training-data.html#cb12-1" tabindex="-1"></a></span>
<span id="cb12-2"><a href="part-1.-prepare-training-data.html#cb12-2" tabindex="-1"></a><span class="co"># Set seed for reproducilibility</span></span>
<span id="cb12-3"><a href="part-1.-prepare-training-data.html#cb12-3" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">3</span>)</span>
<span id="cb12-4"><a href="part-1.-prepare-training-data.html#cb12-4" tabindex="-1"></a></span>
<span id="cb12-5"><a href="part-1.-prepare-training-data.html#cb12-5" tabindex="-1"></a><span class="co"># Check the structure (this is binary with only two classes)</span></span>
<span id="cb12-6"><a href="part-1.-prepare-training-data.html#cb12-6" tabindex="-1"></a><span class="fu">table</span>(trainingdata<span class="sc">$</span>class) </span>
<span id="cb12-7"><a href="part-1.-prepare-training-data.html#cb12-7" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb12-8"><a href="part-1.-prepare-training-data.html#cb12-8" tabindex="-1"></a><span class="co">#&gt; female.gibbon         noise </span></span>
<span id="cb12-9"><a href="part-1.-prepare-training-data.html#cb12-9" tabindex="-1"></a><span class="co">#&gt;            26            27</span></span>
<span id="cb12-10"><a href="part-1.-prepare-training-data.html#cb12-10" tabindex="-1"></a></span>
<span id="cb12-11"><a href="part-1.-prepare-training-data.html#cb12-11" tabindex="-1"></a><span class="co"># Create an index to randomly sample 25 observations for test data</span></span>
<span id="cb12-12"><a href="part-1.-prepare-training-data.html#cb12-12" tabindex="-1"></a>testindex <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">53</span>,<span class="dv">25</span>,<span class="at">replace =</span> <span class="cn">FALSE</span>)</span>
<span id="cb12-13"><a href="part-1.-prepare-training-data.html#cb12-13" tabindex="-1"></a></span>
<span id="cb12-14"><a href="part-1.-prepare-training-data.html#cb12-14" tabindex="-1"></a><span class="co"># Isolate test data samples</span></span>
<span id="cb12-15"><a href="part-1.-prepare-training-data.html#cb12-15" tabindex="-1"></a>testdata <span class="ot">&lt;-</span> trainingdata[testindex,]</span>
<span id="cb12-16"><a href="part-1.-prepare-training-data.html#cb12-16" tabindex="-1"></a></span>
<span id="cb12-17"><a href="part-1.-prepare-training-data.html#cb12-17" tabindex="-1"></a><span class="co"># Remove from training data</span></span>
<span id="cb12-18"><a href="part-1.-prepare-training-data.html#cb12-18" tabindex="-1"></a>trainingdata_sub <span class="ot">&lt;-</span> trainingdata[<span class="sc">-</span>testindex,]</span>
<span id="cb12-19"><a href="part-1.-prepare-training-data.html#cb12-19" tabindex="-1"></a></span>
<span id="cb12-20"><a href="part-1.-prepare-training-data.html#cb12-20" tabindex="-1"></a><span class="co"># Ensure class is a factor</span></span>
<span id="cb12-21"><a href="part-1.-prepare-training-data.html#cb12-21" tabindex="-1"></a>trainingdata_sub<span class="sc">$</span>class <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(trainingdata_sub<span class="sc">$</span>class)</span>
<span id="cb12-22"><a href="part-1.-prepare-training-data.html#cb12-22" tabindex="-1"></a></span>
<span id="cb12-23"><a href="part-1.-prepare-training-data.html#cb12-23" tabindex="-1"></a><span class="co"># Run SVM</span></span>
<span id="cb12-24"><a href="part-1.-prepare-training-data.html#cb12-24" tabindex="-1"></a>ml.model.svm <span class="ot">&lt;-</span> e1071<span class="sc">::</span><span class="fu">svm</span>(trainingdata_sub[, <span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(trainingdata_sub)], trainingdata_sub<span class="sc">$</span>class, <span class="at">kernel =</span> <span class="st">&quot;radial&quot;</span>, </span>
<span id="cb12-25"><a href="part-1.-prepare-training-data.html#cb12-25" tabindex="-1"></a>                           <span class="at">cross =</span> <span class="dv">25</span>,</span>
<span id="cb12-26"><a href="part-1.-prepare-training-data.html#cb12-26" tabindex="-1"></a>                           <span class="at">probability =</span> <span class="cn">TRUE</span>)</span>
<span id="cb12-27"><a href="part-1.-prepare-training-data.html#cb12-27" tabindex="-1"></a></span>
<span id="cb12-28"><a href="part-1.-prepare-training-data.html#cb12-28" tabindex="-1"></a><span class="co"># Predict SVM on test data</span></span>
<span id="cb12-29"><a href="part-1.-prepare-training-data.html#cb12-29" tabindex="-1"></a>svm.predict.labels <span class="ot">&lt;-</span> <span class="fu">predict</span>(ml.model.svm,testdata[,<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>)])</span>
<span id="cb12-30"><a href="part-1.-prepare-training-data.html#cb12-30" tabindex="-1"></a></span>
<span id="cb12-31"><a href="part-1.-prepare-training-data.html#cb12-31" tabindex="-1"></a><span class="co"># Create a confusion matrix</span></span>
<span id="cb12-32"><a href="part-1.-prepare-training-data.html#cb12-32" tabindex="-1"></a>caret<span class="sc">::</span><span class="fu">confusionMatrix</span>(svm.predict.labels,testdata<span class="sc">$</span>class)</span>
<span id="cb12-33"><a href="part-1.-prepare-training-data.html#cb12-33" tabindex="-1"></a><span class="co">#&gt; Confusion Matrix and Statistics</span></span>
<span id="cb12-34"><a href="part-1.-prepare-training-data.html#cb12-34" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb12-35"><a href="part-1.-prepare-training-data.html#cb12-35" tabindex="-1"></a><span class="co">#&gt;                Reference</span></span>
<span id="cb12-36"><a href="part-1.-prepare-training-data.html#cb12-36" tabindex="-1"></a><span class="co">#&gt; Prediction      female.gibbon noise</span></span>
<span id="cb12-37"><a href="part-1.-prepare-training-data.html#cb12-37" tabindex="-1"></a><span class="co">#&gt;   female.gibbon            11     0</span></span>
<span id="cb12-38"><a href="part-1.-prepare-training-data.html#cb12-38" tabindex="-1"></a><span class="co">#&gt;   noise                     0    14</span></span>
<span id="cb12-39"><a href="part-1.-prepare-training-data.html#cb12-39" tabindex="-1"></a><span class="co">#&gt;                                        </span></span>
<span id="cb12-40"><a href="part-1.-prepare-training-data.html#cb12-40" tabindex="-1"></a><span class="co">#&gt;                Accuracy : 1            </span></span>
<span id="cb12-41"><a href="part-1.-prepare-training-data.html#cb12-41" tabindex="-1"></a><span class="co">#&gt;                  95% CI : (0.8628, 1)  </span></span>
<span id="cb12-42"><a href="part-1.-prepare-training-data.html#cb12-42" tabindex="-1"></a><span class="co">#&gt;     No Information Rate : 0.56         </span></span>
<span id="cb12-43"><a href="part-1.-prepare-training-data.html#cb12-43" tabindex="-1"></a><span class="co">#&gt;     P-Value [Acc &gt; NIR] : 5.066e-07    </span></span>
<span id="cb12-44"><a href="part-1.-prepare-training-data.html#cb12-44" tabindex="-1"></a><span class="co">#&gt;                                        </span></span>
<span id="cb12-45"><a href="part-1.-prepare-training-data.html#cb12-45" tabindex="-1"></a><span class="co">#&gt;                   Kappa : 1            </span></span>
<span id="cb12-46"><a href="part-1.-prepare-training-data.html#cb12-46" tabindex="-1"></a><span class="co">#&gt;                                        </span></span>
<span id="cb12-47"><a href="part-1.-prepare-training-data.html#cb12-47" tabindex="-1"></a><span class="co">#&gt;  Mcnemar&#39;s Test P-Value : NA           </span></span>
<span id="cb12-48"><a href="part-1.-prepare-training-data.html#cb12-48" tabindex="-1"></a><span class="co">#&gt;                                        </span></span>
<span id="cb12-49"><a href="part-1.-prepare-training-data.html#cb12-49" tabindex="-1"></a><span class="co">#&gt;             Sensitivity : 1.00         </span></span>
<span id="cb12-50"><a href="part-1.-prepare-training-data.html#cb12-50" tabindex="-1"></a><span class="co">#&gt;             Specificity : 1.00         </span></span>
<span id="cb12-51"><a href="part-1.-prepare-training-data.html#cb12-51" tabindex="-1"></a><span class="co">#&gt;          Pos Pred Value : 1.00         </span></span>
<span id="cb12-52"><a href="part-1.-prepare-training-data.html#cb12-52" tabindex="-1"></a><span class="co">#&gt;          Neg Pred Value : 1.00         </span></span>
<span id="cb12-53"><a href="part-1.-prepare-training-data.html#cb12-53" tabindex="-1"></a><span class="co">#&gt;              Prevalence : 0.44         </span></span>
<span id="cb12-54"><a href="part-1.-prepare-training-data.html#cb12-54" tabindex="-1"></a><span class="co">#&gt;          Detection Rate : 0.44         </span></span>
<span id="cb12-55"><a href="part-1.-prepare-training-data.html#cb12-55" tabindex="-1"></a><span class="co">#&gt;    Detection Prevalence : 0.44         </span></span>
<span id="cb12-56"><a href="part-1.-prepare-training-data.html#cb12-56" tabindex="-1"></a><span class="co">#&gt;       Balanced Accuracy : 1.00         </span></span>
<span id="cb12-57"><a href="part-1.-prepare-training-data.html#cb12-57" tabindex="-1"></a><span class="co">#&gt;                                        </span></span>
<span id="cb12-58"><a href="part-1.-prepare-training-data.html#cb12-58" tabindex="-1"></a><span class="co">#&gt;        &#39;Positive&#39; Class : female.gibbon</span></span>
<span id="cb12-59"><a href="part-1.-prepare-training-data.html#cb12-59" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb12-60"><a href="part-1.-prepare-training-data.html#cb12-60" tabindex="-1"></a></span>
<span id="cb12-61"><a href="part-1.-prepare-training-data.html#cb12-61" tabindex="-1"></a><span class="co"># Run Random Forest</span></span>
<span id="cb12-62"><a href="part-1.-prepare-training-data.html#cb12-62" tabindex="-1"></a>ml.model.rf <span class="ot">&lt;-</span> randomForest<span class="sc">::</span><span class="fu">randomForest</span>(<span class="at">x=</span>trainingdata_sub[, <span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(trainingdata_sub)], <span class="at">y =</span> trainingdata_sub<span class="sc">$</span>class)</span>
<span id="cb12-63"><a href="part-1.-prepare-training-data.html#cb12-63" tabindex="-1"></a></span>
<span id="cb12-64"><a href="part-1.-prepare-training-data.html#cb12-64" tabindex="-1"></a><span class="co"># Predict RF on test data</span></span>
<span id="cb12-65"><a href="part-1.-prepare-training-data.html#cb12-65" tabindex="-1"></a>rf.predict.labels <span class="ot">&lt;-</span> <span class="fu">predict</span>(ml.model.rf,testdata[,<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>)])</span>
<span id="cb12-66"><a href="part-1.-prepare-training-data.html#cb12-66" tabindex="-1"></a></span>
<span id="cb12-67"><a href="part-1.-prepare-training-data.html#cb12-67" tabindex="-1"></a><span class="co"># Create a confusion matrix</span></span>
<span id="cb12-68"><a href="part-1.-prepare-training-data.html#cb12-68" tabindex="-1"></a>caret<span class="sc">::</span><span class="fu">confusionMatrix</span>(rf.predict.labels,testdata<span class="sc">$</span>class)</span>
<span id="cb12-69"><a href="part-1.-prepare-training-data.html#cb12-69" tabindex="-1"></a><span class="co">#&gt; Confusion Matrix and Statistics</span></span>
<span id="cb12-70"><a href="part-1.-prepare-training-data.html#cb12-70" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb12-71"><a href="part-1.-prepare-training-data.html#cb12-71" tabindex="-1"></a><span class="co">#&gt;                Reference</span></span>
<span id="cb12-72"><a href="part-1.-prepare-training-data.html#cb12-72" tabindex="-1"></a><span class="co">#&gt; Prediction      female.gibbon noise</span></span>
<span id="cb12-73"><a href="part-1.-prepare-training-data.html#cb12-73" tabindex="-1"></a><span class="co">#&gt;   female.gibbon            11     3</span></span>
<span id="cb12-74"><a href="part-1.-prepare-training-data.html#cb12-74" tabindex="-1"></a><span class="co">#&gt;   noise                     0    11</span></span>
<span id="cb12-75"><a href="part-1.-prepare-training-data.html#cb12-75" tabindex="-1"></a><span class="co">#&gt;                                           </span></span>
<span id="cb12-76"><a href="part-1.-prepare-training-data.html#cb12-76" tabindex="-1"></a><span class="co">#&gt;                Accuracy : 0.88            </span></span>
<span id="cb12-77"><a href="part-1.-prepare-training-data.html#cb12-77" tabindex="-1"></a><span class="co">#&gt;                  95% CI : (0.6878, 0.9745)</span></span>
<span id="cb12-78"><a href="part-1.-prepare-training-data.html#cb12-78" tabindex="-1"></a><span class="co">#&gt;     No Information Rate : 0.56            </span></span>
<span id="cb12-79"><a href="part-1.-prepare-training-data.html#cb12-79" tabindex="-1"></a><span class="co">#&gt;     P-Value [Acc &gt; NIR] : 0.0006695       </span></span>
<span id="cb12-80"><a href="part-1.-prepare-training-data.html#cb12-80" tabindex="-1"></a><span class="co">#&gt;                                           </span></span>
<span id="cb12-81"><a href="part-1.-prepare-training-data.html#cb12-81" tabindex="-1"></a><span class="co">#&gt;                   Kappa : 0.7634          </span></span>
<span id="cb12-82"><a href="part-1.-prepare-training-data.html#cb12-82" tabindex="-1"></a><span class="co">#&gt;                                           </span></span>
<span id="cb12-83"><a href="part-1.-prepare-training-data.html#cb12-83" tabindex="-1"></a><span class="co">#&gt;  Mcnemar&#39;s Test P-Value : 0.2482131       </span></span>
<span id="cb12-84"><a href="part-1.-prepare-training-data.html#cb12-84" tabindex="-1"></a><span class="co">#&gt;                                           </span></span>
<span id="cb12-85"><a href="part-1.-prepare-training-data.html#cb12-85" tabindex="-1"></a><span class="co">#&gt;             Sensitivity : 1.0000          </span></span>
<span id="cb12-86"><a href="part-1.-prepare-training-data.html#cb12-86" tabindex="-1"></a><span class="co">#&gt;             Specificity : 0.7857          </span></span>
<span id="cb12-87"><a href="part-1.-prepare-training-data.html#cb12-87" tabindex="-1"></a><span class="co">#&gt;          Pos Pred Value : 0.7857          </span></span>
<span id="cb12-88"><a href="part-1.-prepare-training-data.html#cb12-88" tabindex="-1"></a><span class="co">#&gt;          Neg Pred Value : 1.0000          </span></span>
<span id="cb12-89"><a href="part-1.-prepare-training-data.html#cb12-89" tabindex="-1"></a><span class="co">#&gt;              Prevalence : 0.4400          </span></span>
<span id="cb12-90"><a href="part-1.-prepare-training-data.html#cb12-90" tabindex="-1"></a><span class="co">#&gt;          Detection Rate : 0.4400          </span></span>
<span id="cb12-91"><a href="part-1.-prepare-training-data.html#cb12-91" tabindex="-1"></a><span class="co">#&gt;    Detection Prevalence : 0.5600          </span></span>
<span id="cb12-92"><a href="part-1.-prepare-training-data.html#cb12-92" tabindex="-1"></a><span class="co">#&gt;       Balanced Accuracy : 0.8929          </span></span>
<span id="cb12-93"><a href="part-1.-prepare-training-data.html#cb12-93" tabindex="-1"></a><span class="co">#&gt;                                           </span></span>
<span id="cb12-94"><a href="part-1.-prepare-training-data.html#cb12-94" tabindex="-1"></a><span class="co">#&gt;        &#39;Positive&#39; Class : female.gibbon   </span></span>
<span id="cb12-95"><a href="part-1.-prepare-training-data.html#cb12-95" tabindex="-1"></a><span class="co">#&gt; </span></span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="package-summary.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="part-2.-run-the-detectorclassifier.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/01-Prepare-training-data.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["gibbonR_tutorial.pdf", "gibbonR_tutorial.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
